;-------------------------------
;KCM
[StateDef 2000]
type = S
movetype= I
physics = S
juggle = 1
ctrl = 0
anim = cond(pos y = 0,2000,2005)
poweradd = 0
sprpriority = 1

[State 0, VelSet]
type = VelSet
trigger1 = pos y > -10
trigger1 = vel y > 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y = 0
statetype = S    
movetype = I       
physics = S

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y != 0
statetype = A   
movetype = I       
physics = A

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = cond(pos y = 0,2001,2006)
ID = 2000
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 99999
scale = 0.85,0.85
sprpriority = 1
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = 0,256

[State 0, Explod]
type = ModifyExplod
trigger1 = time <= 5
ID = 2000
trans = addalpha
alpha = 0+time*51,256-time*51

[State 0, VarSet]
type = VarSet
trigger1 = time = 6
v = 0
value = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S9,7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2,54

[State 0, ---KCM---]
type = Helper
trigger1 = time = 0
triggerall = numhelper(2010) = 0
helpertype = normal;player
name = "Aura"
ID =  2010
stateno = 2010
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.85
supermovetime = 999999
;pausemovetime = 999999

[State 0, Explod Plomyki]
type = Explod
trigger1 = 1
anim = 2003
id = 2003
pos = cond((stateno = 5100 || stateno = 5110 || stateno = 5150), -20+random%35, -18+random%36),cond((stateno = 5100 || stateno = 5110 || stateno = 5150), 5-random%10,cond(statetype = C, -5-random%20, -10-random%30))
postype = p1
accel = 0,-0.05
facing = 1
bindtime = 5
removetime = -2
sprpriority = -1+random%4
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = time < 2
time = 2
add = 0-time*20,0-time*20,0-time*20

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = time >= 2 && time <= 4
time = 2
add = -40,-40,-40

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = time > 4
time = 2
add = -40+(time-4)*20,-40+(time-4)*20,-40+(time-4)*20

[State 1500, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 6

[State 0, end]
type = ChangeState
trigger1 = time = 6
value = cond(pos y = 0,0,50)
ctrl = 1
;-------------------------------
;KCM OFF
[StateDef 2005]
type = S
movetype= I
physics = S
juggle = 1
ctrl = 0
anim = cond(pos y = 0,2002,2007)
poweradd = 0
sprpriority = 1

[State 0, VelSet]
type = VelSet
trigger1 = pos y > -10
trigger1 = vel y > 0
y = 0

[State -3, Afterimage normal]
type = AfterImage
trigger1 = time = 0
time = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y = 0
statetype = S    
movetype = I       
physics = S

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y != 0
statetype = A   
movetype = I       
physics = A 

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = cond(pos y = 0,2001,2006)
ID = 2000
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 99999
scale = 0.85,0.85
sprpriority = 1
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = 256,0

[State 0, Explod]
type = ModifyExplod
trigger1 = time <= 5
ID = 2000
trans = addalpha
alpha = 256-time*51,0+time*51

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S9,6

[State 0, Explod Plomyki]
type = Explod
trigger1 = 1
anim = 2003
id = 2003
pos = cond((stateno = 5100 || stateno = 5110 || stateno = 5150), -20+random%35, -18+random%36),cond((stateno = 5100 || stateno = 5110 || stateno = 5150), 5-random%10,cond(statetype = C, -5-random%20, -10-random%30))
postype = p1
accel = 0,-0.05
facing = 1
bindtime = 5
removetime = -2
sprpriority = -1+random%4
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod Plomyki]
type = Explod
trigger1 = 1
anim = 2003
id = 2003
pos = cond((stateno = 5100 || stateno = 5110 || stateno = 5150), 20-random%35, 18-random%36),cond((stateno = 5100 || stateno = 5110 || stateno = 5150), -5+random%10,cond(statetype = C, -25+random%20, -40+random%30))
postype = p1
accel = 0,-0.03
facing = -1
bindtime = 5
removetime = -2
sprpriority = -1+random%4
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, VarSet]
type = VarSet
trigger1 = time = 5
v = 0
value = 0

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = time < 2
time = 2
add = 0-time*20,0-time*20,0-time*20

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = time >= 2 && time <= 4
time = 2
add = -40,-40,-40

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = time > 4
time = 2
add = -40+(time-4)*20,-40+(time-4)*20,-40+(time-4)*20

[State 1500, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA
time = 5

[State 0, end]
type = ChangeState
trigger1 = time = 6
value = cond(win, 181, cond(pos y = 0,0,50))
ctrl = 1
;---------------------------------------------------------------------------
;Aura
[Statedef 2010]
type = S
ctrl = 1
anim = parent,anim+10000
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
triggerall = parent, stateno != [20600,20689]
value = 2
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
triggerall = parent, stateno = [20600,20689]
value = -9
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = -1
pos = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, Turn]
type = Turn
trigger1 = facing = 1 && parent, facing = -1
trigger2 = facing = -1 && parent, facing = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != parent,anim+10000
value = parent,anim+10000

[State 0, AngleDraw]
type = AngleDraw
trigger1 = parent, stateno != 5050
trigger1 = parent, stateno = 103000
trigger1 = parent, stateno = 103001
trigger1 = parent, stateno = 103070
trigger1 = parent, stateno != 109998
value = 0

[State 0, AngleDraw]
Type = AngleDraw
trigger1 = parent, stateno = 5050
Value = -((ATan(parent, vel y/parent,vel x))*(180.0/PI))

[State 0, AngleDraw]
type = AngleDraw
trigger1 = parent, stateno = 103000
value = 180

[State 0, AngleDraw]
type = AngleDraw
trigger1 = parent, stateno = 103001
value = 180

[State 0, AngleDraw]
type = AngleDraw
trigger1 = parent, stateno = 103070
trigger1 = parent, time < 20
scale = 1-(parent, time*0.05),1-(parent, time*0.05)
value = time*15

[State 0, AngleDraw]
type = AngleDraw
trigger1 = parent, stateno = 103070
trigger1 = parent, time > 20
scale = 0+((parent, time-20)*0.05),0+((parent, time-20)*0.05)
value = time*15

[State 0, AngleDraw]
Type = AngleDraw
trigger1 = parent, stateno = 109998
Value = -parent,time*300

[State 2000, 2]
type = destroyself
trigger1 = parent, var(0) != 2
trigger1 = parent, stateno = 2005
triggerall = parent, ishelper = 0

[State 2000, 2]
type = changestate
trigger1 = parent, var(0) != 2 && parent, stateno = [0,199]
trigger2 = lose
trigger3 = parent, life = 0
trigger4 = parent, var(0) != 2 && parent, stateno = [5000,5199]
triggerall = parent, stateno != [2000,2005]
triggerall = parent, ishelper = 0
value = 2015

;---

[State 0, Explod Plomyki]
type = Explod
trigger1 = timemod = 10,0
triggerall = parent, ishelper = 1
anim = 2003
id = 2003
pos = cond((parent, stateno = 5100 || parent, stateno = 5110 || parent, stateno = 5150), -20+random%35, -18+random%36),cond((parent, stateno = 5100 || parent, stateno = 5110 || parent, stateno = 5150), 5-random%10,cond(parent, statetype = C, -5-random%20, -10-random%30))
postype = p1
accel = 0,-0.05
facing = 1
bindtime = 5
removetime = -2
sprpriority = -1+random%4
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 2000, 2]
type = destroyself
trigger1 = parent, stateno != [500,519]
trigger1 = parent, stateno != [0,198]
trigger1 = parent, stateno != [5000,5199]
trigger1 = parent, stateno != [30000,39999]
trigger1 = parent, stateno != [370650,370655]
trigger2 = parent, stateno = 32223
triggerall = parent, ishelper = 1
;---------------------------------------------------------------------------
;Tail Create
[Statedef 2011]
type    = S
movetype= I
physics = N
anim = 2011
sprpriority = -2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, Helper]
type = Helper
trigger1 = Abs(parent, pos x-pos x)>10
trigger2 = Abs(parent, pos y-pos y-30)>10
triggerall = time >= 6
;triggerall = parent, stateno = 1111 || parent, stateno = 2222
helpertype = normal ;player
name = "tail"
ID = 2012
stateno = 2012
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, ChangeState]
type = ChangeState
trigger1 = Abs(parent, pos x-pos x)>10
trigger2 = Abs(parent, pos y-pos y-30)>10
triggerall = time >= 6
value = 2011

[State 0, PosSet]
type = PosSet
trigger1 = 1
x = parent, pos x
y = parent, pos y - 30

[State 0, ChangeState]
type = destroyself
trigger1 = root, var(0) < 2
trigger2 = parent, stateno = [20600,20699]


;---------------------------------------------------------------------------
;Tail
[Statedef 2012]
type    = S
movetype= I
physics = N
anim = 2012
sprpriority = -2

; zapamiêtanie pozycji startu
[State 0, VarSet]
type = VarSet
trigger1 = time = 0
var(4) = pos x

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
var(5) = pos y

; zmiana do po³o¿enia postaci
[State 0, PosSet]
type = PosSet
trigger1 = 1;time < 6
x = parent, pos x
y = parent, pos y

;pomiar kata
[State 1640, X]
Type=VarSet
Trigger1=time < 6
fvar(13)=(Pos X-var(4))*Facing

[State 1640, Y]
Type=VarSet
trigger1=time < 6
fvar(14)=-(pos y-var(5))

[State 1640, alfa]
Type=VarSet
trigger1=fvar(13)!=0
fvar(15)= Atan(fvar(14)/fvar(13))*180/PI +cond(fvar(13)>0,0,180)

[State 1640, alfa]
Type=VarSet
trigger1=fvar(13)=0
fvar(15)=cond(fvar(14)>0,90,-90)

;pomiar d³ugoœc ogona
[State 0, VarSet]
type = VarSet
trigger1 = time < 6
fvar(4) = Abs(var(4) - pos x)/150

[State 0, VarSet]
type = VarSet
trigger1 = time < 6
trigger1 = fvar(4) > 1.7
fvar(4) = 1.7

; zmina d³ugosci i kata
[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
;scale = 0.5*cond(fvar(4)<0.5,0.7,0.2+fvar(4)),0.5*cond(fvar(4)<0.5,0.8,0.3+fvar(4))
scale = 0.8*cond(fvar(4)<0.5,0.7,0.2+fvar(4)),0.6*cond(fvar(4)<0.5,0.8,0.3+fvar(4))
value = fvar(15)

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 0, ChangeState]
type = destroyself
trigger1 = animtime = 0
trigger2 = root, var(0) < 2
;-------------------------------
;Aura OFF
[StateDef 2015]
type = S
ctrl = 1
anim = parent,anim+10000
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 10
value = parent,stateno

[State 0, VarAdd]
type = VarAdd
trigger1 = parent, stateno != var(10)
v = 11
value = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = -1
pos = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, Turn]
type = Turn
trigger1 = facing = 1 && parent, facing = -1
trigger2 = facing = -1 && parent, facing = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != parent,anim+10000
value = parent,anim+10000

[State 0, AngleDraw]
type = AngleDraw
trigger1 = parent, stateno != 5050
trigger1 = parent, stateno != 109998
value = 0

[State 0, AngleDraw]
Type = AngleDraw
trigger1 = parent, stateno = 5050
Value = -((ATan(parent, vel y/parent,vel x))*(180.0/PI))

[State 0, AngleDraw]
Type = AngleDraw
trigger1 = parent, stateno = 109998
Value = -parent,time*300

[State 0, PlaySnd]
type = PlaySnd
trigger1 = parent, stateno != var(10)
persistent = 0
value = S9,6

[State 0, Explod Plomyki]
type = Explod
trigger1 = parent, stateno != var(10)
anim = 2003
id = 2003
pos = cond((parent,stateno = 5100 || parent,stateno = 5110 || parent,stateno = 5150), -20+random%35, -18+random%36),cond((parent,stateno = 5100 || parent,stateno = 5110 || parent,stateno = 5150), 5-random%10,cond(statetype = C, -5-random%20, -10-random%30))
postype = p1
accel = 0,-0.05
facing = 1
bindtime = 5
removetime = -2
sprpriority = -1+random%4
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod Plomyki]
type = Explod
trigger1 = parent, stateno != var(10)
anim = 2003
id = 2003
pos = cond((parent,stateno = 5100 || parent,stateno = 5110 || parent,stateno = 5150), 20-random%35, 18-random%36),cond((parent,stateno = 5100 || parent,stateno = 5110 || parent,stateno = 5150), -5+random%10,cond(statetype = C, -25+random%20, -40+random%30))
postype = p1
accel = 0,-0.03
facing = -1
bindtime = 5
removetime = -2
sprpriority = -1+random%4
scale = 0.5,0.5
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = var(11) >= 5
v = 0
value = 0

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = var(11) > 0 && var(11) < 2
time = 2
add = 0-var(11)*20,0-var(11)*20,0-var(11)*20

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = var(11) = [2,4]
time = 2
add = -40,-40,-40

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = var(11) > 4
time = 2
add = -40+(var(11)-4)*20,-40+(var(11)-4)*20,-40+(var(11)-4)*20

[State 0, end]
type = destroyself
trigger1 = var(11) >= 6
;-----------------
;Usuwanie Rak
[StateDef 20199]
type = S
movetype = I
physics = S
juggle = 1
ctrl = 0
poweradd = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = ishelper(20992) 
trigger1 = !time
value = 20994

[State -3, Afterimage normal]
type = AfterImage
trigger1 = 1
time = 1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150-(time)*10,256

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 150-(time)*10,256

[State 0, End]
type = Destroyself
trigger1 = Time = 15
;-----------------
;Combo 1
[StateDef 20200]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 20200
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-45*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -45*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -3,-.8
air.type = High
air.velocity = -3,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 1
[StateDef 20201]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 20201
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-43*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -43*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 1
[StateDef 20202]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20202
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +60
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-46*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -46*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -3,-.8
air.type = High
air.velocity = -3,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 1
[StateDef 20203]
type = S
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 20203
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-54*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -54*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,1
airguard.velocity = -3,-.8
air.type = High
air.velocity = -3,1
air.hittime = 12
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 1
[StateDef 20205]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20205
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +60
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-48*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -48*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-1
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-2
air.hittime = 12
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 1
[StateDef 20206]
type = S
movetype= A
physics = S
juggle  = 1
velset = 4,0
ctrl = 0
anim = 20206
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-41*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -41*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,-2
airguard.velocity = -4,-.8
air.type = High
air.velocity = -4,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 1
[StateDef 20207]
type = S
movetype= A
physics = S
juggle  = 1
velset = 8,0
ctrl = 0
anim = 20207
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-34*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = S, NA
damage = 50,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -34*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -7,-3
airguard.velocity = -5,-.8
air.type = High
air.velocity = -7,-3
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 1
[StateDef 20208]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20208
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0+random%7
volume = 255
channel = 3

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Reka"
ID = 200
stateno = 20209
pos = 10*0.85,-42*0.85
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85*0.8
size.yscale = 0.85*0.8

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;Combo 1
[StateDef 20209]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20209
poweradd = 0
sprpriority = 3

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 10
triggerall = parent, stateno = 20208
time = 1
pos = 10*0.85,-42*0.85

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2021
pos = 0, -42*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = C, HP
damage = 100,20
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, 0
hitsound = S9, 5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -10,-3
airguard.velocity = -10,-3
air.type = High
air.velocity = -10,-3
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
p2stateno = 109990
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 20199
ctrl = 1
;-----------------
;Combo 2
[StateDef 20210]
type = C
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 20210
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -45*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -42*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 2
[StateDef 20211]
type = C
movetype = A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 20211
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F3

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
y = -4

[State 0, VelSet]
type = VelSet
trigger1 = time > 4 && pos y < 0
x = 3

[State 0, Gravity]
type = Gravity
trigger1 = time > 4 && pos y < 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 4 && pos y >= 0
triggerall = anim = 20211
value = 22111

[State 0, PosSet]
type = PosSet
trigger1 = time > 4 && pos y >= 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time > 4 && pos y >= 0
x = 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time > 4 && pos y >= 0
statetype = S
movetype = A
physics = S

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 6 && pos y >= 0
persistent = 0
value = F4

[State 0, Explod]
type = Explod
trigger1 = time > 4 && pos y >= 0
persistent = 0
anim = F290
ID = 23
pos = -1,3
postype = p1  ;p2,front,back,left,right
scale = 1.8,1.5
sprpriority = 2
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -34*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -34*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,-1
airguard.velocity = -3,-1
air.type = High
air.velocity = -3,-1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = anim = 22111 && AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 2
[StateDef 20212]
type = C
movetype = A
physics = S
juggle = 1
velset = 6,0
ctrl = 0
anim = 20212
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -33*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 5
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -33*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,3
airguard.velocity = -3,3
air.type = High
air.velocity = -4,3
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 2
[StateDef 20214]
type = C
movetype= A
physics = S
juggle  = 1
velset = 5,0
ctrl = 0
anim = 20214
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -15*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -15*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,-2
airguard.velocity = -4,-2
air.type = High
air.velocity = -4,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 2
[StateDef 20215]
type = C
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20215
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +50
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F3

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 1
y = -7

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
statetype = A
movetype = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -70*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, -70*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-9
airguard.velocity = -2,-9
air.type = High
air.velocity = -2,-9
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 2
[StateDef 20216]
type = A
movetype= A
physics = A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20216
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70
y = p2bodydist y -50

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 3
y = -2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -35*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 50,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -35*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,8
airguard.velocity = -2,8
air.type = High
air.velocity = -2,8
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 2
[StateDef 20217]
type = C
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20217
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70

[State 0, PosAdd]
type = PosSet
trigger1 = animelem = 2
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S1,0+random%7
volume = 255
channel = 3

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Reka"
ID = 200
stateno = 20218
pos = 0,-40*0.85
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85*0.5
size.yscale = 0.85*0.5

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;Combo 2
[StateDef 20218]
type = C
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20218
poweradd = 0
sprpriority = 3

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 14
triggerall = parent, stateno = 20217
time = 1
pos = 0,-40*0.85

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,5

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2021
pos = 0, -40*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 75,15
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, 0
hitsound = S9, 5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,-13
airguard.velocity = -4,-13
air.type = High
air.velocity = -4,-13
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 20199
ctrl = 1
;-----------------
;Combo 3
[StateDef 20220]
type = S
movetype= A
physics = S
juggle  = 1
velset = 7,0
ctrl = 0
anim = 20220
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -47*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -47*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 3
[StateDef 20221]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20221
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,5+random%2
volume = 255
channel = 3

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Klon"
ID = 200
stateno = 20222
pos = -20,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.85

[State 0, End]
type = ChangeState
trigger1 = time > 10 && numhelper(200) = 0
value = 0
ctrl = 1
;-----------------
;Combo 3
[StateDef 20222]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20222
poweradd = 20
sprpriority = 1

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30222
ID = 30222
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 2
supermovetime = 9999
ownpal = 1

[State 0, Explod]
type = RemoveExplod
trigger1 = anim = 22221
ID = 30222

[State 0, Explod]
type = Explod
trigger1 = anim = 22221
persistent = 0
anim = 32221
ID = 32221
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 2
supermovetime = 9999
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F3

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
y = -4

[State 0, VelSet]
type = VelSet
trigger1 = time > 2 && pos y < 0
x = 6

[State 0, Gravity]
type = Gravity
trigger1 = time > 2 && pos y < 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 2 && pos y >= 0
triggerall = anim = 20222
value = 22221

[State 0, VelSet]
type = VelSet
trigger1 = anim = 22221 && time < 10
x = 4

[State 0, PosSet]
type = PosSet
trigger1 = time > 5 && pos y >= 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time > 2 && pos y >= 0
x = 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time > 2 && pos y >= 0
statetype = S
movetype = A
physics = S

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 2 && pos y >= 0
persistent = 0
value = F4

[State 0, Explod]
type = Explod
trigger1 = time > 2 && pos y >= 0
persistent = 0
anim = F290
ID = 23
pos = -1,3
postype = p1  ;p2,front,back,left,right
scale = 1.8,1.5
sprpriority = 2
ontop = 0
ownpal = 1

[State 0, Prawa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = 10+random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0+random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, Srodek]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -5+random%10,-20-random%10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = -1+random%3,-1-random%2
scale = 1,1
sprpriority = 5
ontop = 0

[State 0, Lewa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -10-random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0-random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 199
time = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -30*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -30*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,0
airguard.velocity = -3,0
air.type = High
air.velocity = -3,0
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = anim = 22221 && AnimTime = 0
value = 199
ctrl = 1
;-----------------
;Combo 3
[StateDef 20223]
type = S
movetype= A
physics = S
juggle  = 1
velset = 7,0
ctrl = 0
anim = 20223
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -47*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -47*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-6
airguard.velocity = -2,-6
air.type = High
air.velocity = -2,-6
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 3
[StateDef 20224]
type = S
movetype = A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20224
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F3

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
y = -5

[State 0, VelSet]
type = VelSet
trigger1 = time > 5 && pos y < 0
x = 3

[State 0, Gravity]
type = Gravity
trigger1 = time > 5 && pos y < 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 5 && pos y >= 0
triggerall = anim = 20224
value = 22241

[State 0, PosSet]
type = PosSet
trigger1 = time > 5 && pos y >= 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time > 5 && pos y >= 0
x = 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time > 5 && pos y >= 0
statetype = S
movetype = A
physics = S

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 5 && pos y >= 0
persistent = 0
value = F4

[State 0, Explod]
type = Explod
trigger1 = time > 5 && pos y >= 0
persistent = 0
anim = F290
ID = 23
pos = -1,3
postype = p1  ;p2,front,back,left,right
scale = 1.8,1.5
sprpriority = 2
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -15*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 6
attr = S, NA
damage = 60,12
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -15*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,6
airguard.velocity = -4,6
air.type = High
air.velocity = -4,6
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = anim = 22241 && AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 3
[StateDef 20225]
type = S
movetype = A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20225
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
triggerall = anim = 225
value = S6,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F3

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
y = -5

[State 0, VelSet]
type = VelSet
trigger1 = time > 0 && pos y < 0
x = 2

[State 0, Gravity]
type = Gravity
trigger1 = time > 0 && pos y < 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 0 && pos y >= 0
triggerall = anim = 20225
value = 22251

[State 0, PosSet]
type = PosSet
trigger1 = time > 0 && pos y >= 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time > 0 && pos y >= 0
x = 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time > 0 && pos y >= 0
statetype = S
movetype = A
physics = S

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && pos y >= 0
persistent = 0
value = F4

[State 0, Explod]
type = Explod
trigger1 = time > 0 && pos y >= 0
persistent = 0
anim = F290
ID = 23
pos = -1,3
postype = p1  ;p2,front,back,left,right
scale = 1.8,1.5
sprpriority = 2
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -15*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 60,12
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -15*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,6
airguard.velocity = -2,6
air.type = High
air.velocity = -3,6
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = anim = 22251 && AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 3
[StateDef 20226]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20226
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,5+random%2
volume = 255
channel = 3

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Klon"
ID = 200
stateno = 20227
pos = 20,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.85

[State 0, End]
type = ChangeState
trigger1 = time > 10 && numhelper(200) = 0
value = 0
ctrl = 1
;-----------------
;Combo 3
[StateDef 20227]
type = S
movetype= A
physics = S
juggle  = 1
velset = 5,0
ctrl = 0
anim = 20227
poweradd = 20
sprpriority = 1

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30227
ID = 30227
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 2
supermovetime = 9999
ownpal = 1

[State 0, Prawa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = 10+random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0+random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, Srodek]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -5+random%10,-20-random%10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = -1+random%3,-1-random%2
scale = 1,1
sprpriority = 5
ontop = 0

[State 0, Lewa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -10-random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0-random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 199
time = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -45*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 50,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -45*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 0,-8
airguard.velocity = 0,-8
air.type = High
air.velocity = 0,-8
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 199
ctrl = 1

;KCM Combo 3
[State -1, KCM Combo 3.7]
type = ChangeState
value = 20228
;PLAYER
trigger1 = root, command = "a"
trigger1 = root, var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,100]
trigger2 = p2dist y = [-80,50]
trigger2 = random = [140,145+root, var(49)*(root, var(49)/10)+10+root, var(48)/40]
trigger2 = root, var(50) = 1
trigger2 = p2stateno != [5110,5150]
;WARUNEK
triggerall = time > 4 && movecontact
;-----------------
;Combo 3
[StateDef 20228]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20228
poweradd = 0
sprpriority = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, Explod]
type = RemoveExplod
trigger1 = time = 0
ID = 30227

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30228
ID = 30228
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 2
supermovetime = 9999
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 2
y = -6

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2
statetype = A
movetype = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = F3

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,0+random%7
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -35*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 50,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -35*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -1,-5
airguard.velocity = -1,-5
air.type = High
air.velocity = -1,-5
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 199
ctrl = 1
;-----------------
;Combo 3
[StateDef 20229]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20229
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70
y = p2bodydist y -50

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 3
y = -2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = A     
movetype = A
physics = A

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S1,0+random%7
volume = 255
channel = 3

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Reka"
ID = 200
stateno = 20219
pos = 10*0.85,-35*0.85
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85*0.5
size.yscale = 0.85*0.5

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;Combo 3
[StateDef 20219]
type = C
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20219
poweradd = 0
sprpriority = 3

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 14
triggerall = parent, stateno = 20229
time = 1
pos = 10*0.85,-35*0.85

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,5

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2021
pos = 0, 60*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 75,15
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, 60*0.85
hitsound = S9, 5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,13
airguard.velocity = -4,13
air.type = High
air.velocity = -4,13
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 20199
ctrl = 1
;-----------------
;Combo 4
[StateDef 20230]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 20230
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -38*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -38*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,0
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,0
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 4
[StateDef 20231]
type = A
movetype= A
physics = A
juggle  = 1
velset = 3,-1
ctrl = 0
anim = 20231
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -28*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -28*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,0
airguard.velocity = -2,0
air.type = High
air.velocity = -2,0
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 4
[StateDef 20232]
type = A
movetype= A
physics = A
juggle  = 1
velset = 3,-1
ctrl = 0
anim = 20232
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -50*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -50*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-1
airguard.velocity = -2,-1
air.type = High
air.velocity = -2,-1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 4
[StateDef 20233]
type = A
movetype= A
physics = A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20233
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70
y = p2bodydist y

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 3
y = -2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S1,0+random%7
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -15*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 60,12
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -15*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,10
airguard.velocity = -2,9
air.type = High
air.velocity = -3,10
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 4
[StateDef 20234]
type = A
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20234
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70
y = p2bodydist y +10

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 6
y = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0+random%7
volume = 255
channel = 4

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Reka"
ID = 200
stateno = 20235
pos = 15*0.85,-38*0.85
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85*0.5
size.yscale = 0.85*0.5

[State 0, End]
type = ChangeState
trigger1 = time = 16
value = 52
ctrl = 1
;-----------------
;Combo 4
[StateDef 20235]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20235
poweradd = 0
sprpriority = 3

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 14
triggerall = parent, stateno = 20234
time = 1
pos = 15*0.85,-38*0.85

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,5

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2021
pos = 0,-35*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 75,15
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, 0
hitsound = S9, 5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -10,-3
airguard.velocity = -10,-3
air.type = High
air.velocity = -10,-3
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 20199
ctrl = 1
;-----------------
;Combo 5
[StateDef 20240]
type = S
movetype= A
physics = S
juggle  = 1
velset = 2,0
ctrl = 0
anim = 20240
poweradd = 20
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -42*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -42*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 5
[StateDef 20241]
type = S
movetype= A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 20241
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -54*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -54*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,1
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 5
[StateDef 20242]
type = S
movetype= A
physics = S
juggle  = 1
velset = 5,0
ctrl = 0
anim = 20242
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -48*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -48*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-1
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 5
[StateDef 20243]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20243
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S3,5+random%2
volume = 255
channel = 3

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Klon"
ID = 200
stateno = 20244
pos = 10,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.85

[State 0, End]
type = ChangeState
trigger1 = time > 10 && numhelper(200) = 0
value = 0
ctrl = 1
;-----------------
;Combo 5
[StateDef 20244]
type = S
movetype= A
physics = S
juggle  = 1
velset = 4,0
ctrl = 0
anim = 20244
poweradd = 20
sprpriority = 1

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30244
ID = 30244
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 2
supermovetime = 9999
ownpal = 1

[State 0, Prawa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = 10+random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0+random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, Srodek]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -5+random%10,-20-random%10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = -1+random%3,-1-random%2
scale = 1,1
sprpriority = 5
ontop = 0

[State 0, Lewa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -10-random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0-random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 199
time = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -41*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -41*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5,-2
airguard.velocity = -5,-.8
air.type = High
air.velocity = -5,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 199
ctrl = 1

;Combo 5
[State -1, Combo 5.6]
type = ChangeState
value = 20247
;PLAYER
trigger1 = root, command = "x"
trigger1 = root, var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,100]
trigger2 = p2dist y = [-50,100]
trigger2 = random = [180,185+root, var(49)*(root, var(49)/10)+10+root, var(48)/40]
trigger2 = root, var(50) = 1
trigger2 = p2stateno != [5110,5150]
;WARUNEK
triggerall = time > 9 && movecontact && parent, stateno = 20245 && parent, time > 10
;-----------------
;Combo 5
[StateDef 20245]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20245
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
helpertype = normal;player
name = "Klon"
ID = 200
stateno = 20246
pos = 110,0
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.85

[State 0, End]
type = ChangeState
trigger1 = time > 10 && numhelper(200) = 0
value = 0
ctrl = 1
;-----------------
;Combo 5
[StateDef 20246]
type = S
movetype = A
physics = S
juggle  = 1
velset = 3,0
ctrl = 0
anim = 20246
poweradd = 20
sprpriority = 1

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0 
anim = 30246
ID = 30246
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 2
supermovetime = 9999
ownpal = 1

[State 0, Explod]
type = RemoveExplod
trigger1 = anim = 22111
ID = 30246

[State 0, Explod]
type = Explod
trigger1 = anim = 22111
persistent = 0
anim = 32111
ID = 32111
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 2
supermovetime = 9999
ownpal = 1

[State 0, Prawa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = 10+random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0+random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, Srodek]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -5+random%10,-20-random%10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = -1+random%3,-1-random%2
scale = 1,1
sprpriority = 5
ontop = 0

[State 0, Lewa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -10-random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0-random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 199
time = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F3

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
y = -3

[State 0, VelSet]
type = VelSet
trigger1 = time > 6 && pos y < 0
x = 5

[State 0, Gravity]
type = Gravity
trigger1 = time > 6 && pos y < 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 6 && pos y >= 0
triggerall = anim = 20246
value = 22111

[State 0, PosSet]
type = PosSet
trigger1 = time > 6 && pos y >= 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time > 6 && pos y >= 0
x = 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time > 6 && pos y >= 0
statetype = S
movetype = A
physics = S

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 6 && pos y >= 0
persistent = 0
value = F4

[State 0, Explod]
type = Explod
trigger1 = time > 6 && pos y >= 0
persistent = 0
anim = F290
ID = 23
pos = -1,3
postype = p1  ;p2,front,back,left,right
scale = 1.8,1.5
sprpriority = 2
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -34*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 50,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -34*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-2
airguard.velocity = -2,-2
air.type = High
air.velocity = -2,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = anim = 22111 && AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 5
[StateDef 20247]
type = S
movetype= A
physics = S
juggle  = 1
velset = 1,0
ctrl = 0
anim = 20247
poweradd = 20
sprpriority = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, Explod]
type = RemoveExplod
trigger1 = time = 0 
ID = 30244

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30247
ID = 30247
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = 2
supermovetime = 9999
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -33*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 2
attr = S, NA
damage = 60,12
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -33*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5,-1
airguard.velocity = -5,-1
air.type = High
air.velocity = -5,-1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 199
ctrl = 1
;-----------------
;Combo 5
[StateDef 20248]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20248
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +100

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-45*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = S, NA
damage = 50,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 15
sparkno = 0+random%4
sparkxy = -15, -45*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,-1
airguard.velocity = -3,-.8
air.type = High
air.velocity = -3,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;------------------
;Combo 5 Rasengan
[StateDef 20249]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20249
poweradd = 0
sprpriority = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +100

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Reka]
type = Explod
trigger1 = time = 5
anim = 22491
id = 22491
pos = -7*0.85,-47*0.85
postype = p1
facing = 1
bindtime = 12
removetime = -2
sprpriority = 4
removeongethit = 1
scale = 0.5*0.85,0.5*0.85
ownpal = 1

[State 0, Turn]
type = Turn
trigger1 = p2bodydist x < -20
trigger1 = time%5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4
volume = 255
channel = 8

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 6
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time > 3 && time < 13
v = 6
value = 10+(time-3)*3;0.5

[State 0, VarSet]
type = VarSet
trigger1 = time = 13
v = 6
value = 40

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
value = F32,5

[State 0, Wiatr]
type = Explod
ownpal = 1
trigger1 = time = 3
anim = F601
id = 600
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = -1
removeongethit = 1
scale = 0.9,0.75
ownpal = 1

[State 0, Wiatr]
type = Explod
ownpal = 1
trigger1 = time = 3
anim = F601
id = 600
pos = 0,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = -1
removeongethit = 1
scale = 0.9,0.75
ownpal = 1

[State 0, Aura]
type = Explod
ownpal = 1
trigger1 = time = 3
anim = F1130
id = 1130
pos = -20,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 7
removeongethit = 1
scale = 1,1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 3
helpertype = normal;player
name = "Rasengan"
ID = 950
stateno = 950
pos = -21*0.85,-39*0.85
size.xscale = 1
size.yscale = 1
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, VelSet]
type = VelSet
trigger1 = time = [13,23]
x = 5-(time-13)/3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S3,24+random%3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S3,24+random%3

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time > 15 && time <= 30 && timemod = 3,0
trigger1 = hitcount < 4
attr = S, NA
damage = 40,8
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 20
sparkno = 63466
sparkxy = -15, -41*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -10,-2
airguard.velocity = -10,-2
air.type = High
air.velocity = -10,-2
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, TargetBind]
type = TargetBind
triggerall = target, ishelper = 0
trigger1 = movehit && time < 30
triggerall = !ishelper
time = 5
pos = 37*0.85,-5

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time = 35
triggerall = !ishelper
hitonce = 1
attr = C, HP
damage = 100,20
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 0
sparkno = 2001
sparkxy = -15, -41*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -10,-2
airguard.velocity = -10,-2
air.type = High
air.velocity = -10,-2
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
p2stateno = 109998

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time = 35
triggerall = ishelper
hitonce = 1
attr = C, HP
damage = 100,20
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 0
sparkno = 2001
sparkxy = -15, -41*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -10,-2
airguard.velocity = -10,-2
air.type = High
air.velocity = -10,-2
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = Time = 35
trigger2 = time > 20 && !movehit
value = 935
ctrl = 1
;-----------------
;Combo 6
[StateDef 20250]
type = C
movetype= A
physics = S
juggle  = 1
velset = 4,0
ctrl = 0
anim = 20250
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -47*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -47*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-6
airguard.velocity = -2,-6
air.type = High
air.velocity = -2,-6
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 6
[StateDef 20251]
type = C
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20251
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S3,5+random%2
volume = 255
channel = 3

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Klon"
ID = 200
stateno = 20252
pos = 60*0.85,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.85

[State 0, End]
type = ChangeState
trigger1 = time > 10 && numhelper(200) = 0
value = 0
ctrl = 1
;-----------------
;Combo 6
[StateDef 20252]
type = C
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20252
poweradd = 0
sprpriority = 1

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30252
ID = 30252
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 2
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 2
y = -7

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A
movetype = A
physics = A

[State 1533,excplod ]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F540
ID = 6074
postype = p1
pos = 0,0
bindtime = 1
sprpriority = 3
ownpal = 1
ontop = 0
pausemovetime = 9999
removetime = -2
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F15,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F15,4

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = F550
pos = 0,0
scale = 0.8,0.8
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time > 3 && time < 13 && time%2
anim = F591
ID = 591
pos = -20+random%40,0-random%20
vel = -1+random%3,-2
accel = 0,0.05
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = 4
ownpal = 1
ontop = 0

[State 1533,excplod ]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F1190
ID = 6074
postype = p1
pos = 0,0
bindtime = 1
sprpriority = 4
ownpal = 1
ontop = 0
pausemovetime = 9999
removetime = 57

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,0+random%7
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -35*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 50,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -35*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -1,-8
airguard.velocity = -1,-8
air.type = High
air.velocity = -1,-8
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = time = 30
value = 199
ctrl = 1
;-----------------
;Combo 6
[StateDef 20253]
type = C
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20253
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +60
y = p2bodydist y -20

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 20254
ctrl = 1
;-----------------
;Combo 6
[StateDef 20254]
type = A
movetype= A
physics = A
juggle  = 1
velset = 3,-4
ctrl = 0
anim = 20254
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -38*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -38*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-1
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 6
[StateDef 20255]
type = A
movetype= A
physics = A
juggle  = 1
velset = 2,-3
ctrl = 0
anim = 20255
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -28*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -28*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-2
airguard.velocity = -2,-2
air.type = High
air.velocity = -2,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 6
[StateDef 20256]
type = A
movetype= A
physics = A
juggle  = 1
velset = 3,-2
ctrl = 0
anim = 20256
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -25*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -25*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,6
airguard.velocity = -4,6
air.type = High
air.velocity = -4,6
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 6
[StateDef 20257]
type = C
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20257
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +90

[State 0, PosAdd]
type = PosSet
trigger1 = animelem = 2
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S3,24+random%3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S3,24+random%3

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Reka"
ID = 200
stateno = 20258
pos = 0,-40*0.85
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85*0.3
size.yscale = 0.85*0.3

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;Combo 6
[StateDef 20258]
type = C
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20258
poweradd = 0
sprpriority = 0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 10
triggerall = parent, stateno = 20257
time = 1
pos = 0,-40*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = time = [10,32]
triggerall = parent, stateno = 20257
time = 1
pos = 7*0.85,-22*0.85

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 6
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time < 10
v = 6
value = 10+time*7

[State 0, VarSet]
type = VarSet
trigger1 = time = 10
v = 6
value = 80

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F32,5

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "Rasengan"
ID = 950
stateno = 950
pos = 15*0.85,-30*0.85
size.xscale = 1
size.yscale = 1
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,5

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 3,0
trigger1 = hitcount < 4
attr = S, NA
damage = 40,8
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 0
pausetime = 0, 20
sparkno = 63466
sparkxy = -15, -80*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5,-8
airguard.velocity =  -5,-8
air.type = High
air.velocity = -5,-8
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, TargetBind]
type = TargetBind
triggerall = target, ishelper = 0
trigger1 = movehit && hitcount < 4
time = 5
pos = 40*0.85,-55

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = hitcount = 4
hitonce = 1
attr = C, HP
damage = 100,20
animtype = Light
guardflag = MA
hitflag = MAF
priority = 0
pausetime = 0, 0
sparkno = 2001
sparkxy = -15, -80*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -7,-10
airguard.velocity = -7,-10
air.type = High
air.velocity = -7,-10
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
p2stateno = 109998

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 20199
ctrl = 1
;-----------------
;Combo 7
[StateDef 20260]
type = S
movetype= A
physics = S
juggle  = 1
velset = 6,0
ctrl = 0
anim = 20260
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -41*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 2
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -41*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-1
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 7
[StateDef 20261]
type = S
movetype= A
physics = S
juggle  = 1
velset = 5,0
ctrl = 0
anim = 20261
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -15*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -15*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-2
airguard.velocity = -2,-2
air.type = High
air.velocity = -2,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Combo 7
[StateDef 20262]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20262
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S3,5+random%2
volume = 255
channel = 3

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Klon"
ID = 200
stateno = 20263
pos = 20*0.85,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.85

[State 0, End]
type = ChangeState
trigger1 = time > 10 && numhelper(200) = 0
value = 0
ctrl = 1
;-----------------
;Combo 7
[StateDef 20263]
type = S
movetype= A
physics = S
juggle  = 1
velset = 4,0
ctrl = 0
anim = 20263
poweradd = 20
sprpriority = 1

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30263
ID = 30263
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 2
ownpal = 1

[State 0, Prawa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = 10+random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0+random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, Srodek]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -5+random%10,-20-random%10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = -1+random%3,-1-random%2
scale = 1,1
sprpriority = 5
ontop = 0

[State 0, Lewa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -10-random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0-random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 199
time = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -45*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, -45*0.85
hitsound = S9,2+random%35
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -6,-1
airguard.velocity = -3,-.8
air.type = High
air.velocity = -6,-1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 199
ctrl = 1

;Combo 7
[State -1, Combo 7.6]
type = ChangeState
value = 20265
;PLAYER
trigger1 = root, command = "x"
trigger1 = root, var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,100]
trigger2 = p2dist y = [-50,100]
trigger2 = random = [220,225+root, var(49)*(root, var(49)/10)+10+root, var(48)/40]
trigger2 = root, var(50) = 1
trigger2 = p2stateno != [5110,5150]
;WARUNEK
triggerall = time > 9 && parent, stateno = 20264 && parent, time > 5 && parent, movecontact
;-----------------
;Combo 7
[StateDef 20264]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20264
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +90

[State 0, PosAdd]
type = PosSet
trigger1 = animelem = 2
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 7

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -47*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 4
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -47*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -5,-1
airguard.velocity = -5,-1
air.type = High
air.velocity = -5,-1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = time > 10 && numhelper(200) = 0
value = 0
ctrl = 1
;-----------------
;Combo 7
[StateDef 20265]
type = S
movetype = A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20265
poweradd = 20
sprpriority = 1

[State 0, Turn]
type = Turn
trigger1 = time = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, Explod]
type = RemoveExplod
trigger1 = time = 0
ID = 30263

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30265
ID = 30265
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 2
ownpal = 1

[State 0, Explod]
type = RemoveExplod
trigger1 = anim = 20265
ID = 30265

[State 0, Explod]
type = Explod
trigger1 = anim = 20265
persistent = 0
anim = 32251
ID = 32251
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 2
ownpal = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
triggerall = anim = 265
value = S6,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F3

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 1
y = -5

[State 0, VelSet]
type = VelSet
trigger1 = time > 0 && pos y < 0
x = 0.6

[State 0, Gravity]
type = Gravity
trigger1 = time > 0 && pos y < 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 0 && pos y >= 0
triggerall = anim = 20265
value = 22251

[State 0, PosSet]
type = PosSet
trigger1 = time > 0 && pos y >= 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time > 0 && pos y >= 0
x = 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time > 0 && pos y >= 0
statetype = S
movetype = A
physics = S

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && pos y >= 0
persistent = 0
value = F4

[State 0, Explod]
type = Explod
trigger1 = time > 0 && pos y >= 0
persistent = 0
anim = F290
ID = 23
pos = -1,3
postype = p1  ;p2,front,back,left,right
scale = 1.8,1.5
sprpriority = 2
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -15*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -7
trigger1 = !time
attr = S, NA
damage = 50,10
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -15*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,6
airguard.velocity = -2,6
air.type = High
air.velocity = -3,6
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = anim = 22251 && AnimTime = 0
trigger1 = parent, stateno != 20266
value = 199
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = anim = 22251
trigger1 = parent, stateno = 20266
value = 20267
;-----------------
;Combo 7
[StateDef 20266]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20266
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,0+random%7
volume = 255
channel = 3

[State 0, Helper]
type = Helper
trigger1 = 0;animelem = 3
helpertype = normal;player
name = "Klon"
ID = 200
stateno = 20267
pos = 40*0.85,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.85

[State 0, End]
type = ChangeState
trigger1 = time > 10 && numhelper(200) = 0
value = 0
ctrl = 1
;-----------------
;Combo 7
[StateDef 20267]
type = S
movetype= A
physics = S
juggle  = 1
velset = 6,0
ctrl = 0
anim = 20267
poweradd = 20
sprpriority = 1

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, Explod]
type = RemoveExplod
trigger1 = time = 0
ID = 30265

[State 0, Explod]
type = RemoveExplod
trigger1 = time = 0
ID = 32251

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30267
ID = 30267
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 2
ownpal = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 199
time = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3
time = 10
pos = 22*0.85,5*0.85

[State 0, TargetDrop]
type = TargetDrop
trigger1 = AnimElem = 4
excludeID = -1
keepone = 1

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -35*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -35*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 3,-7
airguard.velocity = 3,-7
air.type = High
air.velocity = 3,-7
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0 && !movecontact
value = 199
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = Time >= 20 && movecontact
value = 20268
ctrl = 1
;-----------------
;Combo 7
[StateDef 20268]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20268
poweradd = 20
sprpriority = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, Explod]
type = RemoveExplod
trigger1 = time = 0
ID = 30267

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30268
ID = 30268
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 2
ownpal = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F3

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 199
time = 10

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = -2
y = -7

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A
movetype = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -70*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, -70*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -1,-7
airguard.velocity = -1,-7
air.type = High
air.velocity = -1,-7
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 199
ctrl = 1
;-----------------
;Combo 7
[StateDef 20269]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20269
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
triggerall = prevstateno = 20267
x = p2bodydist x +90
y = p2bodydist y -80

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
triggerall = prevstateno != 20267
x = p2bodydist x +75
y = p2bodydist y -40

[State 0, VelSet]
type = VelSet
trigger1 = time > 15
x = 3
y = 5

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S3,24+random%3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S3,24+random%3

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Reka"
ID = 200
stateno = 20259
pos = 5*0.85,-35*0.85
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85*0.3
size.yscale = 0.85*0.3

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;Combo 7
[StateDef 20259]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20259
poweradd = 0
sprpriority = 3

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 0
ignorehitpause = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 32
triggerall = parent, stateno = 20269
time = 1
pos = 0,-40*0.85

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 6
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time < 10
v = 6
value = 10+time*7

[State 0, VarSet]
type = VarSet
trigger1 = time = 10
v = 6
value = 80

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F32,5

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "Rasengan"
ID = 950
stateno = 950
pos = 15*0.85,30*0.85
size.xscale = 1
size.yscale = 1
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,5

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 3,0
trigger1 = hitcount < 4
attr = S, NA
damage = 40,8
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 10
sparkno = 63466
sparkxy = -15, 80*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -7,10
airguard.velocity =  -7,10
air.type = High
air.velocity = -7,10
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, TargetBind]
type = TargetBind
triggerall = target, ishelper = 0
trigger1 = movehit && hitcount < 4
time = 5
pos = 45*0.85,120*0.85

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = hitcount = 4
hitonce = 1
attr = C, HP
damage = 100,20
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 0
sparkno = 2001
sparkxy = -15, 80*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -9,15
airguard.velocity = -9,15
air.type = High
air.velocity = -9,15
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 20199
ctrl = 1
;-----------------
;Combo 8
[StateDef 20270]
type = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 20270
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -34*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -34*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-1
airguard.velocity = -2,-1
air.type = High
air.velocity = -2,-1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 8
[StateDef 20271]
type = A
movetype= A
physics = A
juggle  = 1
velset = 3,-1
ctrl = 0
anim = 20271
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -50*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -50*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-1
airguard.velocity = -2,-1
air.type = High
air.velocity = -2,-1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 8
[StateDef 20272]
type = A
movetype= A
physics = A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20272
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +50
y = p2bodydist y +5

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 3
y = -1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -35*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 6
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -35*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,-2
airguard.velocity = -3,-2
air.type = High
air.velocity = -3,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Combo 8
[StateDef 20273]
type = A
movetype= A
physics = A
juggle  = 1
velset = 3,-1
ctrl = 0
anim = 20273
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -25*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -25*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,6
airguard.velocity = -4,6
air.type = High
air.velocity = -4,6
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Podrzucenie
[StateDef 20280]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20280
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S3,5+random%2
volume = 255
channel = 3

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Klon"
ID = 200
stateno = 20281
pos = 30*0.85,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.85

[State 0, End]
type = ChangeState
trigger1 = time > 10 && numhelper(200) = 0
value = 0
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = time > 10 && helper(200), stateno = 20282 && helper(200), movecontact
value = 20283
ctrl = 1
;-----------------
;Podrzucenie
[StateDef 20281]
type = S
movetype= A
physics = S
juggle  = 1
velset = 8,0
ctrl = 0
anim = 20281
poweradd = 20
sprpriority = 1

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30281
ID = 30281
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 2
ownpal = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, Prawa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = 10+random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0+random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, Srodek]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -5+random%10,-20-random%10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = -1+random%3,-1-random%2
scale = 1,1
sprpriority = 5
ontop = 0

[State 0, Lewa]
type = Explod
trigger1 = time = 0
anim = F696
ownpal = 1
ID = 900
pos = -10-random%10,-30-random%20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
vel = 0-random%2,-1-random%3
scale = 0.6,0.6
sprpriority = 5
ontop = 0

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 199
time = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F9,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = AnimElem = 3
time = 10
pos = 22*0.85,5*0.85

[State 0, TargetDrop]
type = TargetDrop
trigger1 = AnimElem = 4
excludeID = -1
keepone = 1

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -35*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -35*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = 5,0
airguard.velocity = 5,0
air.type = High
air.velocity = 5,0
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0 && !movecontact
value = 199
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = Time >= 25 && movecontact
value = 20282
ctrl = 1
;-----------------
;Podrzucenie
[StateDef 20282]
type = S
movetype= A
physics = S
juggle  = 1
velset = -2,0
ctrl = 0
anim = 20282
poweradd = 20
sprpriority = 1

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 0
value = 2

[State 0, Explod]
type = RemoveExplod
trigger1 = time = 0
ID = 30281

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 30282
ID = 30282
pos = 0,0
scale = 0.85,0.85
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 2
ownpal = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F3

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = -2
y = -7

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A
movetype = A
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -70*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, -70*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -1,-9
airguard.velocity = -1,-9
air.type = High
air.velocity = -1,-9
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 199
ctrl = 1
;-----------------
;Podrzucenie Atak 1
[StateDef 20283]
type = A
movetype = A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20283
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +60
y = p2bodydist y -30

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 3
y = -2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = A
movetype = A
physics = A

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -34*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, -34*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,-6
airguard.velocity = -3,-6
air.type = High
air.velocity = -3,-6
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
p1stateno = 20284

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Podrzucenie Atak 2
[StateDef 20284]
type = A
movetype= A
physics = A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20284
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +60
y = p2bodydist y -30

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 3
y = -2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -38*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, -38*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,-6
airguard.velocity = -4,-6
air.type = High
air.velocity = -4,-6
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
p1stateno = 20285

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Podrzucenie Atak 3
[StateDef 20285]
type = A
movetype= A
physics = A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20285
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +60
y = p2bodydist y -30

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 3
y = -2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -28*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, -28*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,-5
airguard.velocity = -4,-5
air.type = High
air.velocity = -4,-5
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
p1stateno = 20286

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Podrzucenie Atak 4
[StateDef 20286]
type = A
movetype= A
physics = A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20286
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +60
y = p2bodydist y -30

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 3
y = -2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -25*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
attr = S, NA
damage = 40,8
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 0
sparkno = 0+random%4
sparkxy = -15, -25*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,6
airguard.velocity = -4,6
air.type = High
air.velocity = -4,6
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
p1stateno = 20287
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------
;Podrzucenie Atak 5
[StateDef 20287]
type = A
movetype= A
physics = A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20287
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animtime = 0 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animtime = 0 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animtime = 0
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x -10
y = p2bodydist y +20

[State 0, Turn]
type = Turn
trigger1 = 0;animtime = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animtime = 0
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 274
ctrl = 1
;-----------------
;Przerzucenie
[StateDef 20290]
type = S
movetype= A
physics = S
juggle  = 1
velset = 10,0
ctrl = 0
anim = 20290
poweradd = 20
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -41*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 60,12
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 10, 15
sparkno = 0+random%4
sparkxy = -15, -41*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-1
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
p1stateno = 20291

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
;Przerzucenie
[StateDef 20291]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20291
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 = animtime = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animtime = 0 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animtime = 0 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animtime = 0
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +100

[State 0, Turn]
type = Turn
trigger1 = animtime = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animtime = 0
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 20208
ctrl = 1
;-----------------
;Mini Kurama Guard
[StateDef 20300]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20300
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,50
volume = 255
channel = 3

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time > 5
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 10

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "Kurama"
ID = 20300
stateno = 20305
pos = 5,-35
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal;player
name = "Kurama Def"
ID = 20305
stateno = 130
pos = 5,-35
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
size.ground.front = 50
size.ground.back = -250
size.air.front = 20
size.air.back = -75
size.height = 100
size.head.pos = 0,-250 
size.mid.pos = 0,-250 

[State 0, End]
type = ChangeState
trigger1 = var(50) = 0 && command != "hold_c"
trigger2 = power = 0
trigger3 = var(50) = 1 && random = [0,100-var(49)*(var(49))/100]
trigger4 = win
trigger5 = lose
trigger6 = drawgame
trigger7 = life = 0
trigger8 = !ALive
trigger9 = time > 30 && var(50) = 1 && p2bodydist x < 0 && random = [0,100+var(49)*(var(49))/10]
trigger10 = var(0) < 2
triggerall = time > 30
value = 0
ctrl = 1
;-----------------
;Mini Kurama Guard
[StateDef 20305]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20305
poweradd = -200
sprpriority = 3

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
persistent = 0
helpertype = normal ;player
name = "White Flash"
ID = 9999
stateno = 9999
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 10
size.yscale = 10
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,6

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20300
time = 1
pos = 10,-25

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S10,0+random%4

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -5

[State 0, End]
type = ChangeState
trigger1 = parent, stateno != 20300
value = 20199
ctrl = 1
;-----------------
;KCM Barrage
[StateDef 20310]
type = S
movetype= A
physics = S
juggle  = 1
velset = 4,0
ctrl = 0
anim = 20310
poweradd = -100
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-45*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 3
attr = S, NA
damage = 60,12
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -45*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3
airguard.velocity = -3,-.8
air.type = High
air.velocity = -3,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0 && !movehit
value = 0
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = movehit
value = 20311
;-----------------
;KCM Barrage
[StateDef 20311]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20311
poweradd = -100
sprpriority = 1

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = 1
time = 10
add = -50,-50,-50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,44

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,44

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 = animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-43*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
attr = S, NA
damage = 60,12
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -43*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0 && !movehit
value = 0
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = movehit
value = 20312
;-----------------
;KCM Barrage
[StateDef 20312]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20312
poweradd = -100
sprpriority = 1

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = 1
time = 10
add = -50,-50,-50

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 = animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-54*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 6
attr = S, NA
damage = 60,12
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -54*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,1
airguard.velocity = -3,-.8
air.type = High
air.velocity = -3,1
air.hittime = 12
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0 && !movehit
value = 0
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = movehit
value = 20313
;-----------------
;KCM Barrage
[StateDef 20313]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20313
poweradd = -100
sprpriority = 1

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = 1
time = 10
add = -50,-50,-50

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 = animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-48*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
attr = S, NA
damage = 60,12
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -48*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-1
airguard.velocity = -2,-.8
air.type = High
air.velocity = -2,-2
air.hittime = 12
envshake.time = 10
envshake.freq = 20
envshake.ampl = -5
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0 && !movehit
value = 0
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = movehit
value = 20314
;-----------------
;KCM Barrage
[StateDef 20314]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20314
poweradd = -100
sprpriority = 1

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = 1
time = 10
add = -50,-50,-50

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 = animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F3

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
y = -4

[State 0, VelSet]
type = VelSet
trigger1 = time > 7 && pos y < 0
x = 4

[State 0, Gravity]
type = Gravity
trigger1 = time > 7 && pos y < 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 7 && pos y >= 0
triggerall = anim = 20314
value = 22111

[State 0, PosSet]
type = PosSet
trigger1 = time > 7 && pos y >= 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time > 7 && pos y >= 0
x = 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time > 7 && pos y >= 0
statetype = S
movetype = A
physics = S

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 9 && pos y >= 0
persistent = 0
value = F4

[State 0, Explod]
type = Explod
trigger1 = time > 7 && pos y >= 0
persistent = 0
anim = F290
ID = 23
pos = -1,3
postype = p1  ;p2,front,back,left,right
scale = 1.8,1.5
sprpriority = 2
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -34*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 60,12
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -34*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,-1
airguard.velocity = -3,-1
air.type = High
air.velocity = -3,-1
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = anim = 22111 && AnimTime = 0 && !movehit
value = 0
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = movehit
value = 20315
;-----------------
;KCM Barrage
[StateDef 20315]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20315
poweradd = -100
sprpriority = 1

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = 1
time = 10
add = -50,-50,-50

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 = animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = animelem = 2
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -33*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 6
attr = S, NA
damage = 60,12
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -33*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,3
airguard.velocity = -3,3
air.type = High
air.velocity = -4,3
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0 && !movehit
value = 0
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = movehit
value = 20316
;-----------------
;KCM Barrage
[StateDef 20316]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20316
poweradd = -100
sprpriority = 1

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = 1
time = 10
add = -50,-50,-50

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 = animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +70
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -15*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = AnimElem = 5
attr = S, NA
damage = 60,12
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 5
sparkno = 0+random%4
sparkxy = -15, -15*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,-2
airguard.velocity = -4,-2
air.type = High
air.velocity = -4,-2
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0 && !movehit
value = 0
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = movehit
value = 20317
ctrl = 1
;-----------------
;KCM Barrage
[StateDef 20317]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20317
poweradd = -100
sprpriority = 1

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = 1
time = 30
add = -50,-50,-50

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 = animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 3 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +100
y = 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3

[State 0, VelSet]
type = VelSet
trigger1 = time = [3,17]
x = 10-(time-3)/6

[State 0, Explod]
type = Explod
trigger1 = time = [3,17]
trigger1 = timemod = 5,0
anim = F300
ID = 24
pos = 0,2
postype = p1  ;p2,front,back,left,right
scale = 1.2,1.2
sprpriority = 2
vel = -1.3,-1
bindtime = 1
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 3
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S4,0+random%16
volume = 255
channel = 4

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0, -10*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 5
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 60,12
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 10
sparkno = 0+random%4
sparkxy = -15, -10*0.85
hitsound = S9,2+random%3
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = -6,-5
airguard.velocity = -6,-5
air.type = High
air.velocity = -6,-5
air.hittime = 20
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movehit
persistent = 0
value = S1,0+random%7
volume = 255
channel = 4

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0 && !movehit
value = 0
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = animtime = 0 && movehit
value = 20318
ctrl = 1
;-----------------
;KCM Barrage
[StateDef 20318]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20291
poweradd = -200
sprpriority = 1

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = 1
time = 20
add = -50,-50,-50

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 1
time = 1

[State -3, KCM]
type = AfterImage
trigger1 = animtime = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animtime = 0 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 1 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animtime = 0 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
trigger2 = animtime = 0
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = p2bodydist x +120

[State 0, Turn]
type = Turn
trigger1 = AnimTime = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 1
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animtime = 0
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 20208
ctrl = 1
;-----------------
;Mini Kurama
[StateDef 20330]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20330
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,50
volume = 255
channel = 3

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "Kurama"
ID = 20330
stateno = 20335
pos = -20,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-----------------
;Mini Kurama
[StateDef 20335]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20335
poweradd = -1000
sprpriority = 3

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
persistent = 0
helpertype = normal ;player
name = "White Flash"
ID = 9999
stateno = 9999
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 10
size.yscale = 10
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,6

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 30
triggerall = parent, stateno = 20330
time = 1
pos = -20,0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S10,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S10,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = F14,5

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2022
pos = 0,-40*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.7,0.7
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 7
time = 20
freq = 60
ampl = -20
phase = 90

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = F550
id = 550
pos = 170,5
postype = p1  ;p2,front,back,left,right
scale = 1.6,1.6
sprpriority = 4
bindtime = 1
facing = 1
ownpal = 1
ontop = 0
removetime = -2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
persistent = 0
value = F15,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
persistent = 0
value = F15,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = F14,6

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = F587
id = 587
pos = 170,5
postype = p1  ;p2,front,back,left,right
scale = 0.6,0.6
sprpriority = 5
bindtime = 1
facing = 1
ownpal = 1
ontop = 0
removetime = -2

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = F64
id = 64
pos = 170,5
postype = p1  ;p2,front,back,left,right
scale = 1,0.4
sprpriority = -2
bindtime = 1
facing = 1
ownpal = 1
ontop = 0
removetime = -2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 7
persistent = 0
anim = F530
pos = 160,5
vel = -1,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 7
persistent = 0
anim = F530
pos = 180,5
vel = 1,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 0.8,0.8
ownpal = 1

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 500,200
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 0
sparkno = 2016
sparkxy = -15, -50*0.85
hitsound = S9, 5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,10
airguard.velocity = -3,10
air.type = High
air.velocity = -3,10
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 20199
ctrl = 1
;-----------------
;Mini Kurama Air
[StateDef 20340]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20340
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,50
volume = 255
channel = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 10

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 2 
statetype = A
movetype = A
physics = A

[State 0, Explod]
type = Explod
trigger1 = time > 10
anim = F20
ID = 20
pos = -10+random%15,-10-random%50
postype = p1  ;P2,front,back,left,right
scale = 0.8,0.4
vel = -2,0
sprpriority = 0
bindtime = 1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = time = 10
anim = F280
pos = -20,-30
scale = 1.5,1.5
postype = p1
facing = 1
bindtime = 1
ownpal = 1
removetime = -2
sprpriority = 0
angle = -90

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "Kurama"
ID = 20340
stateno = 20345
pos = 10,-25
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;Mini Kurama Air
[StateDef 20345]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20345
poweradd = -500
sprpriority = 3

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
persistent = 0
helpertype = normal ;player
name = "White Flash"
ID = 9999
stateno = 9999
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 10
size.yscale = 10
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,6

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 30
triggerall = parent, stateno = 20340
time = 1
pos = 10,-25

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S10,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = F14,5

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2021
pos = 0,15*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 1,1
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 250,100
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 0
sparkno = 2016
sparkxy = -15, 15*0.85
hitsound = S9, 5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -7,-2
airguard.velocity = -7,-2
air.type = High
air.velocity = -7,-2
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 20199
ctrl = 1
;-----------------
;KCM Air Barrage
[StateDef 20390]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20390
poweradd = -500
sprpriority = 1

[State 0, PalFXWiz]
type = BGPalFX
trigger1 = 1
time = 10
add = -50,-50,-50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S1,0+random%7

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 2
time = 1

[State -3, KCM]
type = AfterImage
trigger1 = animelem = 4
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 2 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 4 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 2 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 4 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S9,1

[State 0, PosAdd]
type = PosSet
trigger1 = animelem = 4
y = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 4
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.5,0.5
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2020
pos = 0,-15*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.6,0.6
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999


[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 4
time = 15
freq = 50
ampl = -15
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F4

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = F60
pos = 0,3
postype = p1  ;p2,front,back,left,right
scale = 1.3,1
sprpriority = 4
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = F62
pos = 0,3
postype = p1  ;p2,front,back,left,right
scale = 1.4,1
sprpriority = -1
ontop = 0
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 0
y = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = F550
id = 550
pos = 0,5
postype = p1  ;p2,front,back,left,right
scale = 1.4,1.4
sprpriority = 4
bindtime = 1
facing = 1
ownpal = 1
ontop = 0
removetime = -2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
persistent = 0
value = F15,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
persistent = 0
value = F15,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F14,6

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = F587
id = 587
pos = 0,5
postype = p1  ;p2,front,back,left,right
scale = 0.5,0.5
sprpriority = 5
bindtime = 1
facing = 1
ownpal = 1
ontop = 0
removetime = -2

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = F64
id = 64
pos = 0,5
postype = p1  ;p2,front,back,left,right
scale = 0.8,0.3
sprpriority = -2
bindtime = 1
facing = 1
ownpal = 1
ontop = 0
removetime = -2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 4
persistent = 0
anim = F530
pos = -10,5
vel = -1,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 0.7,0.7
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 4
persistent = 0
anim = F530
pos = 10,5
vel = 1,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 0.7,0.7
ownpal = 1

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 250,100
getpower = 0
givepower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 1
pausetime = 0, 10
sparkno = 2010
sparkxy = -15, -15*0.85
hitsound = S9,5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,-6
airguard.velocity = -4,-6
air.type = High
air.velocity = -4,-6
air.hittime = 12
envshake.time = 20
envshake.freq = 25
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;-----------------
;Bijudama Skok
[StateDef 20400]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20400
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S4,0+random%16

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F3

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = F360
pos = 0,0
scale = 1,1
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
supermovetime= 9999
pausemovetime= 9999
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = F370
pos = 0,0
scale = 1,1
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 3
supermovetime= 9999
pausemovetime= 9999
ownpal = 1

[State 40, 4]
type = VelSet
trigger1 = animelem = 4
x = const(velocity.jump.back.x)-backedgedist/25
y = const(velocity.jump.y)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A
movetype = I
physics = A

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
value = S6,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = F3,1

[State 0, Explod]
type = Explod
trigger1 = animelem = 9
anim = F280
pos = 0,0
scale = 1.5,1.5
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 0
supermovetime= 9999
pausemovetime= 9999
ownpal = 1

[State 45, 6]
type = VelSet
trigger1 = animelem = 9
x = -4-backedgedist/50
y = const(velocity.airjump.y)

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 20401
ctrl = 1
;-----------------
;Bijudama Prepare
[StateDef 20401]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20401
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,50

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 200
movetime = 200
anim = -1
darken = 0
unhittable = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 100
value = F34,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 100
value = F34,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 100
value = F34,2

[State 0, Swiatlo do superpausy]
type = Explod
ownpal = 1
trigger1 = time = 100
anim = 4002
ID = 4000
pos = 190,100
postype = back
bindtime = -1
removetime = 60
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = -100
ownpal = 1
ontop = 0

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time < 100
time = 1
add = -time*1.2,-time*1.2,-time*1.2

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time < 100
time = 1
add = -time*.8,-time*.8,-time*.8

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time = 100
time = 60
add = -120,-120,-120

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time = 100
time = 60
add = -80,-80,-80

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time = [160,200]
time = 1
add = -120+(time-160)*3,-120+(time-160)*3,-120+(time-160)*3

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time = [160,200]
time = 1
add = -80+(time-160)*2,-80+(time-160)*2,-80+(time-160)*2


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 80
value = S3,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 80
value = S3,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 80
value = S3,49

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 80
value = S3,49


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 120
value = S3,52

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 120
value = S3,52

[State 0, Helper]
type = Helper
trigger1 = time = 10
helpertype = normal;player
name = "Kurama"
ID = 20400
stateno = 20405
pos = 0,-10
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.6
size.yscale = 0.6
supermovetime = 9999
pausemovetime = 9999

[State 0, End]
type = ChangeState
trigger1 = Time = 200
value = 50
ctrl = 1
;-----------------
;Bijudama Kurama
[StateDef 20405]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20405
poweradd = -1000
sprpriority = 3

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, Helper]
type = Helper
trigger1 = animelem = 1
persistent = 0
helpertype = normal ;player
name = "White Flash"
ID = 9999
stateno = 9999
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 10
size.yscale = 10
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,6

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = time < 30
triggerall = parent, stateno = 20401
time = 1
pos = 0,-10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S10,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = F14,5

[State 0, Helper]
type = Helper
trigger1 = time = 40
helpertype = normal
name = "Bijudama"
stateno = 20410
ID = 20410
pos = 75,5
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 1.4
size.yscale = 1.4

[State 0, End]
type = ChangeState
trigger1 = parent, stateno != [20401,20402]
value = 20199
;--------------------
;Bijudama
[StateDef 20410]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20410
poweradd = 0
sprpriority = 2

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time < 60
value = -50

[State 0, EnvShake]
type = EnvShake
trigger1 = time > 10 && time%5 = 0
time = 20
freq = 20
ampl = -4
phase = 90

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
triggerall = ishelper(20410)
time = 1
pos = 70*0.8,10*0.8


[State 0, BindToParent]
type = BindToParent
trigger1 = time <= 110
triggerall = ishelper(20411)
time = 1
pos = 120,-200

[State 0, BindToParent]
type = BindToParent
trigger1 = time > 110
triggerall = ishelper(20411)
time = 1
pos = 125,-120




[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S12,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = S9,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = S9,8

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
trigger2 = time > 0 && time < 60 && timemod = 15,0 
anim = F1070
id = 484
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 2,2
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
trigger2 = time > 0 && time < 60 && timemod = 15,0 
anim = 20414
id = 484
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 0.5,0.5
sprpriority = 4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
trigger2 = time > 0 && time < 40 && timemod = 15,0 
anim = 20411
id = 484
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 0.9,0.9
sprpriority = -1

[State 0, Explod]
type = Explod
ownpal = 0
trigger1 = time > 0 && time < 50 && timemod = 5,0 
anim = 20412
pos = -30+random%60,-30+random%60
postype = p1
bindtime = 1
removetime = -2
supermovetime=9999
pausemovetime=9999
scale = 0.5,0.5
sprpriority = -1

[State 0, Explod]
type = Explod
ownpal = 0
trigger1 = time > 0 && time < 50 && timemod = 5,0 
anim = 20413
pos = -30+random%60,-30+random%60
postype = p1
bindtime = 1
removetime = -2
supermovetime=9999
pausemovetime=9999
scale = 0.5,0.5
sprpriority = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
value2 = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 120
value = 20415
ctrl = 1
;--------------------
;Bijudama
[StateDef 20415]
type = A
movetype= A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20415
poweradd = 0
sprpriority = 3

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
time = 1
pos = 10,30

[State 1640, X]
Type=VarSet
Trigger1=1
fvar(13)=(EnemyNear(0),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1=1
fvar(14)=(EnemyNear(0),pos Y-Pos Y)

[State 1640, Vector Length]
Type=VarSet
trigger1=1
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 484

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = F461
id = 4860
pos = 0,0
postype = p1
bindtime = 5
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 0.4,0.4
vel = -vel x/10,-vel y/10
sprpriority = 4
angle = -atan(vel y/vel x)*180/PI 

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
anim = F461
id = 20415
pos = 0,0
postype = p1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 0.4,0.4
vel = -vel x/10,-vel y/10
sprpriority = 4
angle = -atan(vel y/vel x)*180/PI 

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
trigger2 = time = 15
anim = 20416
id = 20416
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 0.4,0.4
sprpriority = 4
angle = -atan(vel y/vel x)*180/PI 

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
anim = 20416
id = 20416
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 0.4,0.4
sprpriority = 4
angle = -atan(vel y/vel x)*180/PI 

[State 0, AngleDraw]
Type = AngleDraw
trigger1 = 1
value = -atan(vel y/vel x)*180/PI 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1

[State 0, VelSet]
type=VelSet
trigger1= time = 1
x=abs((Fvar(13))/(fvar(15))*30)
y=abs((FVar(14))/(fvar(15))*30)-2

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 5
y = 0.5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
value2 = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S12,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S12,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F14,6

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 10,0
attr = S, NA
damage = 0,0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 0
sparkno = 523626
sparkxy = -15,0
hitsound = 35, 23464325
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -10,5
airguard.velocity = -10,5
air.type = High
air.velocity = -10,5
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y >= 0
value = 20420
ctrl = 1
;--------------------
;Bijudama
[StateDef 20420]
type = A
movetype= A
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20420
poweradd = 0
sprpriority = 3

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20415

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 20416

[State 0, VelSet]
type=VelSet
trigger1 = time < 10
x = 10-time
y = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = timemod = 3,0 && time < 30
time = 2
add = 79,66,51
mul = 237,198,156

[State 0, BGPalFX]
type = BGPalFX
trigger1 = timemod = 3,2 && time < 30
time = 2
add = 79,47,20
mul = 237,131,60

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,10

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 80
freq = 80
ampl = -12
phase = 90

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F1370
ID = 1370
pos = -200,20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -3,0
removetime = -2
pausemovetime = 999
scale = 2,2
sprpriority = 5
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F1370
ID = 1370
pos = 200,20
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 3,0
removetime = -2
pausemovetime = 999
scale = 2,2
sprpriority = 5
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F64
pos = 0,0
scale = 5,1.5
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = -1
supermovetime=9999
pausemovetime=9999
ownpal = 1

[State 0, Explod]
type = Explod
trigger1 = time < 25
anim = F591
ID = 591
pos = -250+random%500,0-random%100
vel = -7+random%15,-5-random%5
accel = 0,0.2
angle = random
postype = p1
bindtime = 1
removetime = -2
supermovetime = 9999
pausemovetime = 9999
scale = 2,2
sprpriority = 4
ownpal = 0
ontop = 0

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 20421
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 1.4,1.4
sprpriority = 4

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F1332
pos = 0,-40
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 4.5,4.4
sprpriority = 3

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F587
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 2.6,2.6
sprpriority = 5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = timemod = 5,0
trigger1 = hitcount < 2
attr = S, NT
damage = 1000,500
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 15
sparkno = 523626
sparkxy = -15,0
hitsound = 35, 23464325
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -10,-15
airguard.velocity = -10,-15
air.type = High
air.velocity = -10,-15
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
palfx.time = 60
palfx.add = 150,0,-100
palfx.mul = 256,256,256
palfx.sinadd = 110,55,85,10
fall = 1

[State 0, destroyself]
type = destroyself
trigger1 = time = 25
;-----------------
;-KM- Naruto Stance
[StateDef 20600]
type = S
movetype= I
physics = S
juggle  = 1
ctrl = 0
anim = 20600
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, Turn]
type = Turn
trigger1 = p2bodydist x < -20 && timemod = 20,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = var(50) = 0
trigger1 = command = "s"
trigger2 = var(50) = 1
trigger2 = random = [900,901]
trigger3 = helper(21600), stateno = 21695
trigger4 = numhelper(21600) = 0
trigger5 = power = 0
trigger6 = win
trigger7 = lose
trigger8 = drawgame
trigger9 = life = 0
trigger10 = !ALive 
value = 20695
ctrl = 0

; Jump
[State -1, Jump]
type = ChangeState
value = 20605
;P1
trigger1 = command = "holdup"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist y < -150
trigger2 = random = [0,5+var(49)*(var(49))/50+(p2bodydist x)/50]
trigger2 = var(50) = 1
triggerall = time > 10
triggerall = helper(21600), stateno != 130
triggerall = helper(21600), stateno != 21610

; Run Fwd
[State -1, Run Fwd]
type = ChangeState
value = 20601
;P1
trigger1 = command = "holdfwd"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x > 150
trigger2 = random = [10,19+var(49)*(var(49))/50+(p2bodydist x)/50]
trigger2 = var(50) = 1
triggerall = time > 10
triggerall = helper(21600), stateno != 130
triggerall = helper(21600), stateno != 21610

; Run Back
[State -1, Run Back]
type = ChangeState
value = 20602
;P1
trigger1 = command = "holdback"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [50,100]
trigger2 = random = [20,29-var(49)*(var(49))/200+cond(p2movetype = A,var(49)*(var(49))/50,0)]
trigger2 = var(50) = 1
triggerall = time > 10
triggerall = helper(21600), stateno != 130
triggerall = helper(21600), stateno != 21610

; Guard
[State -1, Guard]
type = ChangeState
value = 20610
trigger1 = command = "holddown"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = var(50) = 1
trigger2 = random = [50,59+var(49)*(var(49))/20+(100-(p2bodydist x))/20]
;WARUNEK
trigger2 = p2movetype = A
;triggerall = inguarddist

; Kurama Hit
[State -1, Kurama Hit]
type = ChangeState
value = 20615
trigger1 = helper(21600), stateno = 21615

;Attack
[State -1, Attack]
type = ChangeState
value = 20620
;PLAYER
trigger1 = command = "a"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,250]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [100,101+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Run Attack
[State -1, Run Attack]
type = ChangeState
value = 20660
;PLAYER
trigger1 = command = "x"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [150,500]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [150,151+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Fala
[State -1, Fala]
type = ChangeState
value = 20630
;PLAYER
trigger1 = command = "b"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,400]
trigger2 = p2dist y = [-100,200]
trigger2 = random = [200,201+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Roar
[State -1, Roar]
type = ChangeState
value = 20625
;PLAYER
trigger1 = command = "y"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,400]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [250,251+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Renzoku
[State -1, Renzoku]
type = ChangeState
value = 20640
;PLAYER
trigger1 = command = "c"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [100,400]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [400,401+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]
triggerall = power >= 1500

;Ultimate: Bijudama
[State -1, Ultimate: Bijudama]
type = ChangeState
value = 20650
;PLAYER
trigger1 = command = "z"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [100,600]
trigger2 = p2dist y = [-100,100]
trigger2 = random = [750,751+var(49)*((power/400)+var(49))/500+power/500+cond((enemy, stateno = 930 || enemy, stateno = 933 || enemy, stateno = 1930 || enemy, stateno = 1933),var(49)*(var(49))/200,0)]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]
triggerall = power >= 3900
triggerall = numenemy = 1
triggerall = numpartner = 0
;-----------------
;Naruto Walk F
[StateDef 20601]
type = S
movetype= I
physics = S
juggle  = 1
ctrl = 0
anim = 20601
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 15

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = var(50) = 0
trigger1 = command = "s"
trigger2 = var(50) = 1
trigger2 = random = [900,901]
trigger3 = helper(21600), stateno = 21695
trigger4 = numhelper(21600) = 0
trigger5 = power = 0
trigger6 = win
trigger7 = lose
trigger8 = drawgame
trigger9 = life = 0
trigger10 = !ALive 
value = 20695
ctrl = 0

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
trigger1 = var(50) = 0
trigger2 = p2bodydist x < 70
trigger2 = var(50) = 1
triggerall = time > 10 && animelem = 2
value = 20600

; Jump
[State -1, Jump]
type = ChangeState
value = 20605
;P1
trigger1 = command = "holdup"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist y < -150
trigger2 = random = [0,5+var(49)*(var(49))/50+(p2bodydist x)/50]
trigger2 = var(50) = 1

; Kurama Hit
[State -1, Kurama Hit]
type = ChangeState
value = 20610
trigger1 = helper(21600), stateno = 21615

;Attack
[State -1, Attack]
type = ChangeState
value = 20620
;PLAYER
trigger1 = command = "a"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,250]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [100,101+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Run Attack
[State -1, Run Attack]
type = ChangeState
value = 20660
;PLAYER
trigger1 = command = "x"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [150,500]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [150,151+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Fala
[State -1, Fala]
type = ChangeState
value = 20630
;PLAYER
trigger1 = command = "b"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,400]
trigger2 = p2dist y = [-100,200]
trigger2 = random = [200,201+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Roar
[State -1, Roar]
type = ChangeState
value = 20625
;PLAYER
trigger1 = command = "y"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,400]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [250,251+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Renzoku
[State -1, Renzoku]
type = ChangeState
value = 20640
;PLAYER
trigger1 = command = "c"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [100,400]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [400,401+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]
triggerall = power >= 1500

;Ultimate: Bijudama
[State -1, Ultimate: Bijudama]
type = ChangeState
value = 20650
;PLAYER
trigger1 = command = "z"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [100,600]
trigger2 = p2dist y = [-100,100]
trigger2 = random = [750,751+var(49)*((power/400)+var(49))/500+power/500+cond((enemy, stateno = 930 || enemy, stateno = 933 || enemy, stateno = 1930 || enemy, stateno = 1933),var(49)*(var(49))/200,0)]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]
triggerall = power >= 3900
triggerall = numenemy = 1
triggerall = numpartner = 0
;-----------------
;Naruto Walk B
[StateDef 20602]
type = S
movetype= I
physics = S
juggle  = 1
ctrl = 0
anim = 20602
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = -15

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = var(50) = 0
trigger1 = command = "s"
trigger2 = var(50) = 1
trigger2 = random = [900,901]
trigger3 = helper(21600), stateno = 21695
trigger4 = numhelper(21600) = 0
trigger5 = power = 0
trigger6 = win
trigger7 = lose
trigger8 = drawgame
trigger9 = life = 0
trigger10 = !ALive 
value = 20695
ctrl = 0

[State 100, 4]
type = ChangeState
trigger1 = command != "holdback"
trigger1 = var(50) = 0
trigger2 = p2bodydist x > 100 && time > (20-var(49)*(var(49))/100)
trigger2 = var(50) = 1
triggerall = time > 10 && animelem = 2
value = 20600

; Jump
[State -1, Jump]
type = ChangeState
value = 20605
;P1
trigger1 = command = "holdup"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist y < -150
trigger2 = random = [0,5+var(49)*(var(49))/50+(p2bodydist x)/50]
trigger2 = var(50) = 1

; Kurama Hit
[State -1, Kurama Hit]
type = ChangeState
value = 20610
trigger1 = helper(21600), stateno = 21615

;Attack
[State -1, Attack]
type = ChangeState
value = 20620
;PLAYER
trigger1 = command = "a"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,250]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [100,101+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Run Attack
[State -1, Run Attack]
type = ChangeState
value = 20660
;PLAYER
trigger1 = command = "x"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [150,500]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [150,151+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Fala
[State -1, Fala]
type = ChangeState
value = 20630
;PLAYER
trigger1 = command = "b"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,400]
trigger2 = p2dist y = [-100,200]
trigger2 = random = [200,201+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Roar
[State -1, Roar]
type = ChangeState
value = 20625
;PLAYER
trigger1 = command = "y"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [0,400]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [250,251+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]

;Renzoku
[State -1, Renzoku]
type = ChangeState
value = 20640
;PLAYER
trigger1 = command = "c"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [100,400]
trigger2 = p2dist y = [-200,50]
trigger2 = random = [400,401+var(49)*(var(49))/50]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]
triggerall = power >= 1500

;Ultimate: Bijudama
[State -1, Ultimate: Bijudama]
type = ChangeState
value = 20650
;PLAYER
trigger1 = command = "z"
trigger1 = var(50) = 0
;AI RANDOM
trigger2 = p2dist x = [100,600]
trigger2 = p2dist y = [-100,100]
trigger2 = random = [750,751+var(49)*((power/400)+var(49))/500+power/500+cond((enemy, stateno = 930 || enemy, stateno = 933 || enemy, stateno = 1930 || enemy, stateno = 1933),var(49)*(var(49))/200,0)]
trigger2 = var(50) = 1
trigger2 = p2stateno != [5110,5150]
triggerall = power >= 3900
triggerall = numenemy = 1
triggerall = numpartner = 0
;-----------------
;Naruto Jump Start
[StateDef 20605]
type = S
movetype= I
physics = S
juggle  = 1
ctrl = 0
anim = 20605
poweradd = 0
sprpriority = -10

[State 0, Turn]
type = Turn
trigger1 = prevstateno = 20602
trigger1 = !time

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
trigger2 = var(50) = 1
trigger2 = p2bodydist x > 150
sysvar(1) = 1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = cond(sysvar(1)=0, const(velocity.jump.neu.x), cond(sysvar(1)=1, const(velocity.jump.fwd.x)*cond(var(0) = 1,1.2,1.0)*cond(var(0) >= 2,1.5,1), const(velocity.jump.back.x)*cond(var(0) = 1,1.2,1.0)*cond(var(0) >= 2,1.5,1)))
y = const(velocity.jump.y)*cond(var(0) = 1,1.2,1.0)*cond(var(0) >= 2,1.3,1)

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
value = 20606

; Kurama Hit
[State -1, Kurama Hit]
type = ChangeState
value = 20610
trigger1 = helper(21600), stateno = 21615
;-----------------
;Naruto Jump
[StateDef 20606]
type = A
movetype= I
physics = N
juggle  = 1
ctrl = 0
anim = 20606
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,0+random%16

[State 40, 4]
type = VelSet
trigger1 = Time = 0
x = cond(sysvar(1)=0, 5, 20)
y = -17

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 0
y = 0.5



[State 100, 4]
type = ChangeState
trigger1 = time >= 10 && pos y >= 0
value = 20607
;-----------------
;Naruto Jump Land
[StateDef 20607]
type = S
movetype= I
physics = S
juggle  = 1
ctrl = 0
anim = 20607
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 40, 4]
type = VelSet
trigger1 = 1
x = cond(sysvar(1)=0, 2, 5)
y = 0

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
value = 20600

; Kurama Hit
[State -1, Kurama Hit]
type = ChangeState
value = 20610
trigger1 = helper(21600), stateno = 21615
;-----------------
;Naruto Guard
[StateDef 20610]
type = S
movetype= I
physics = S
juggle  = 1
ctrl = 0
anim = 20610
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, Turn]
type = Turn
trigger1 = p2bodydist x < -20 && timemod = 20,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S4,0+random%16

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 120, Stop Guarding]
type = ChangeState
trigger1 = command != "holddown"
trigger1 = var(50) = 0
trigger2 = var(50) = 1
trigger2 = enemy, movetype != A
value = 20600
;-----------------
;Naruto Hit
[StateDef 20615]
type = S
movetype= I
physics = S
juggle  = 1
ctrl = 0
anim = 20615
poweradd = 0
sprpriority = -10

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, Turn]
type = Turn
trigger1 = p2bodydist x < -20 && timemod = 20,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -3

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

; Kurama Hit
[State -1, Kurama Hit]
type = ChangeState
trigger1 = helper(21600), stateno != 21615
value = 20600
;-----------------
;Naruto Attack
[StateDef 20620]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 20620
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S4,0+random%16

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 120, End]
type = ChangeState
trigger1 = animtime = 0
value = 20600
;-----------------
;Naruto Roar
[StateDef 20625]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 20625
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S4,0+random%16

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 120, End]
type = ChangeState
trigger1 = animtime = 0
value = 20600
;-----------------
;Naruto Fala
[StateDef 20630]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 20630
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S4,0+random%16

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 120, End]
type = ChangeState
trigger1 = animtime = 0
value = 20600
;-----------------
;Naruto Renzoku
[StateDef 20640]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 20640
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 0;1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,50

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 120, End]
type = ChangeState
trigger1 = animtime = 0
value = 20600
;-----------------
;Naruto Bijudama
[StateDef 20650]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 20650
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 0;1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,50

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 130
movetime = 130
anim = -1
darken = 0
unhittable = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = F34,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = F34,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = F34,2

[State 0, Swiatlo do superpausy]
type = Explod
ownpal = 1
trigger1 = time = 60
anim = 4002
ID = 4000
pos = 190,100
postype = back
bindtime = -1
removetime = 60
supermovetime = 9999
pausemovetime = 9999
scale = 1,1
sprpriority = -100
ownpal = 1
ontop = 0

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time < 60
time = 1
add = -time*2,-time*2,-time*2

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time < 60
time = 1
add = -time*1.33,-time*1.33,-time*1.33

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time = 60
time = 60
add = -120,-120,-120

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time = 60
time = 60
add = -80,-80,-80

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time = [120,160]
time = 1
add = -120+(time-120)*3,-120+(time-120)*3,-120+(time-120)*3

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time = [120,160]
time = 1
add = -80+(time-120)*2,-80+(time-120)*2,-80+(time-120)*2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = S3,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = S3,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 120
value = S3,52

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 120
value = S3,52

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 120, End]
type = ChangeState
trigger1 = time = 160
value = 20600
;-----------------
;Naruto Run Attack
[StateDef 20660]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 20660
poweradd = 0
sprpriority = -10

[State 0, PowerAdd]
type = PowerAdd
trigger1 = 1
value = -4

[State 0, LifeSet]
type = LifeSet
trigger1 = 1
value = var(14)-var(19)*0.2;*0.5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time >= 0
value = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 2
length = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 25

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S4,0+random%16

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 120, End]
type = ChangeState
trigger1 = time = 63
value = 20600
;-----------------
;Naruto Start
[StateDef 20690]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 20690
poweradd = 0
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S3,50

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, 2]
type = Explod
trigger1 = animelem = 4 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 4 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 6
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S9,1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 4
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 6
anim = 2020
ID = 2020
pos = 127,-242
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 14
value = life

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "Rozciaganie"
ID = 20691
stateno = 20691
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 10
persistent = 0
helpertype = player
name = "Kurama"
ID = 21600
stateno = 21690
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.7
size.yscale = 0.7
supermovetime = 9999
pausemovetime = 9999
size.ground.front = 0*0.7
size.ground.back = -200*0.7
size.air.front = 150*0.7
size.air.back = -200*0.7
size.height = 250*0.7
size.head.pos = 150*0.7,-250*0.7
size.mid.pos = -50*0.7,-200*0.7

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 20600
ctrl = 1
;-----------------
;Naruto End
[StateDef 20695]
type = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 20695
poweradd = 0
sprpriority = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PosSet]
type = PosSet
trigger1 = animtime = 0
y = -95

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-----------------
;Rozsciaganie ekranu
[StateDef 20691]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20691
poweradd = 0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 10,10

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 0
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
x = parent, pos x

[State 0, VelSet]
type = VelSet
trigger1 = pos y < -200
y = -3

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= -200
y = -200

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  1
flag = noshadow

[State 0, end]
type = destroyself
trigger1 =  parent, stateno != [20600,20690]
;-----------------
;-KM- Kurama Stance
[StateDef 21600]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21600
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, HitOverride]
type = HitOverride
trigger1 = time >= 0
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 21615
time = 2

[State 0, Turn]
type = Turn
trigger1 = parent, facing = -1 && facing = 1

[State 0, Turn]
type = Turn
trigger1 = parent, facing = 1 && facing = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = timemod = 10,0
time = 20
freq = 20
ampl = -5
phase = 5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20601
value = 21601
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20602
value = 21602
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20605
value = 21605
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20610
value = 130
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20620
value = 21620
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20625
value = 21625
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20630
value = 21630
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20640
value = 21640
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20650
value = 21650
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20660
value = 21660
ctrl = 0
;-----------------
;Kurama Walk F
[StateDef 21601]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21601
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, HitOverride]
type = HitOverride
trigger1 = time >= 0
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 21615
time = 2

[State 0, Turn]
type = Turn
trigger1 = parent, facing = -1 && facing = 1

[State 0, Turn]
type = Turn
trigger1 = parent, facing = 1 && facing = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F16,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F16,1

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 2
time = 30
freq = 30
ampl = -6
phase = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = 40*0.7,2
postype = p1
scale = 2,1.8
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F65
ID = 24
pos = 40*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = -75*0.7,2
postype = p1
scale = 2,1.8
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F65
ID = 24
pos = -75*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = -325*0.7,2
postype = p1
scale = 2,1.8
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F65
ID = 24
pos = -325*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 100, 4]
type = ChangeState
trigger1 = parent, stateno != 20601
value = 21600

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20605
value = 21605
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20610
value = 130
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20620
value = 21620
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20625
value = 21625
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20630
value = 21630
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20640
value = 21640
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20650
value = 21650
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20660
value = 21660
ctrl = 0
;-----------------
;Kurama Walk B
[StateDef 21602]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21602
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, HitOverride]
type = HitOverride
trigger1 = time >= 0
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 21615
time = 2

[State 0, Turn]
type = Turn
trigger1 = parent, facing = -1 && facing = 1

[State 0, Turn]
type = Turn
trigger1 = parent, facing = 1 && facing = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F16,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F16,1

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 2
time = 30
freq = 30
ampl = -6
phase = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = -40*0.7,2
postype = p1
scale = 2,1.8
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F65
ID = 24
pos = -40*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = 75*0.7,2
postype = p1
scale = 2,1.8
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F65
ID = 24
pos = 75*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = 325*0.7,2
postype = p1
scale = 2,1.8
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F65
ID = 24
pos = 325*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 100, 4]
type = ChangeState
trigger1 = parent, stateno != 20602
value = 21600

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20605
value = 21605
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20610
value = 130
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20620
value = 21620
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20625
value = 21625
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20630
value = 21630
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20640
value = 21640
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20650
value = 21650
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20660
value = 21660
ctrl = 0
;-----------------
;Kurama Jump Start
[StateDef 21605]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21605
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, HitOverride]
type = HitOverride
trigger1 = time >= 0
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 21615
time = 2

[State 0, Turn]
type = Turn
trigger1 = parent, facing = -1 && facing = 1

[State 0, Turn]
type = Turn
trigger1 = parent, facing = 1 && facing = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1


[State 100, 4]
type = ChangeState
trigger1 = parent, stateno = 20606
value = 21606

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20610
value = 130
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0
;-----------------
;Kurama Jump
[StateDef 21606]
type = A
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21606
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, Turn]
type = Turn
trigger1 = parent, facing = -1 && facing = 1

[State 0, Turn]
type = Turn
trigger1 = parent, facing = 1 && facing = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S10,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S10,0+random%4

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F14,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F14,6

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 30
freq = 30
ampl = -6
phase = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F3

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F370
pos = 20*0.7,0
scale = 2,1.8
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F65
ID = 24
pos = 20*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = F370
pos = -165*0.7,0
scale = 2,1.8
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F65
ID = 24
pos = -165*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = F14,3

[State 100, 4]
type = ChangeState
trigger1 = parent, stateno = 20607
value = 21607
;-----------------
;Kurama Jump Land
[StateDef 21607]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21607
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, HitOverride]
type = HitOverride
trigger1 = time >= 0
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 21615
time = 2

[State 0, Turn]
type = Turn
trigger1 = parent, facing = -1 && facing = 1

[State 0, Turn]
type = Turn
trigger1 = parent, facing = 1 && facing = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F16,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,10

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 50
freq = 50
ampl = -10
phase = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F290
ID = 23
pos = 200*0.7,2
postype = p1
scale = 3,2.7
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F64
ID = 24
pos = 200*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F290
ID = 23
pos = 10*0.7,2
postype = p1
scale = 3,2.7
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F64
ID = 24
pos = 10*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F290
ID = 23
pos = -175*0.7,2
postype = p1
scale = 3,2.7
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F64
ID = 24
pos = -175*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 100,20
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 0
sparkno = 765757
sparkxy = -15, -20*0.85
hitsound = S9, 76575
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,5
airguard.velocity = -2,5
air.type = High
air.velocity = -2,5
air.hittime = 12
envshake.time = 20
envshake.freq = 20
envshake.ampl = -6
envshake.phase = 10
fall = 1

[State 100, 4]
type = ChangeState
trigger1 = parent, stateno != 20607
value = 21600

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20610
value = 130
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0
;-----------------
;Kurama Hit
[StateDef 21615]
type = S
movetype= H
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21615
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, HitOverride]
type = HitOverride
trigger1 = time >= 2
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 21615
time = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, Turn]
type = Turn
trigger1 = parent, facing = -1 && facing = 1

[State 0, Turn]
type = Turn
trigger1 = parent, facing = 1 && facing = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = HitShakeOver
value = 21600
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0
;-----------------
;Kurama Attack
[StateDef 21620]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21620
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, HitOverride]
type = HitOverride
trigger1 = time >= 0
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 21615
time = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S10,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S10,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,5

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2023
pos = 0,-40*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.7,0.7
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 2
time = 20
freq = 60
ampl = -20
phase = 90

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = F550
id = 550
pos = 150,5
postype = p1  ;p2,front,back,left,right
scale = 1.6,1.6
sprpriority = 4
bindtime = 1
facing = 1
ownpal = 1
ontop = 0
removetime = -2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
persistent = 0
value = F15,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
persistent = 0
value = F15,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,6

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = F587
id = 587
pos = 150,5
postype = p1  ;p2,front,back,left,right
scale = 0.6,0.6
sprpriority = 5
bindtime = 1
facing = 1
ownpal = 1
ontop = 0
removetime = -2

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = F64
id = 64
pos = 150,5
postype = p1  ;p2,front,back,left,right
scale = 1,0.4
sprpriority = -2
bindtime = 1
facing = 1
ownpal = 1
ontop = 0
removetime = -2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
persistent = 0
anim = F530
pos = 140,5
vel = -1,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 0.8,0.8
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
persistent = 0
anim = F530
pos = 160,5
vel = 1,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 0.8,0.8
ownpal = 1

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 250,100
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 0
sparkno = 2016
sparkxy = -15, -50*0.85
hitsound = S9, 5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,10
airguard.velocity = -3,10
air.type = High
air.velocity = -3,10
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 100, 4]
type = ChangeState
trigger1 = parent, stateno != 20620
value = 21600

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0
;-----------------
;Kurama Roar
[StateDef 21625]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21625
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, HitOverride]
type = HitOverride
trigger1 = time >= 0
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 21615
time = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0 
value = S12,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0 
value = S12,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0 
trigger2 = time > 0 && timemod = 15,0
value = F14,5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0 
trigger2 = time > 0 && timemod = 15,0
anim = F1070
id = 484
pos = 120,-200
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 3.5,3.5
sprpriority = 3

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 0 
trigger2 = time > 0 && timemod = 15,0
anim = 20414
id = 484
pos = 120,-200
postype = p1
bindtime = -1
removetime = -2
supermovetime= 9999
pausemovetime= 9999
scale = 0.7,0.7
sprpriority = 4

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0 
trigger2 = time > 0 && timemod = 15,0
time = 40
freq = 60
ampl = -20
phase = 90

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = !time
hitonce = 1
attr = S, NA
damage = 250,100
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 0
sparkno = 645646
sparkxy = -15, -80*0.85
hitsound = F14, 6
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -10,-10
airguard.velocity = -10,-10
air.type = High
air.velocity = -10,-10
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 100, 4]
type = ChangeState
trigger1 = parent, stateno != 20625
value = 21600

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0
;-----------------
;Kurama Fala
[StateDef 21630]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21631
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, HitOverride]
type = HitOverride
trigger1 = time >= 0
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 21615
time = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S10,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S10,0+random%4

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Fala"
ID = 21635
stateno = 21635
pos = 118,-137
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.35
size.yscale = 0.2
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 100, 4]
type = ChangeState
trigger1 = parent, stateno != 20630
value = 21600

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0
;------------------
;Fala
[StateDef 21635]
type = A
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21635
poweradd = 0
sprpriority = 3

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = -1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = F461
ID = 461
scale = 0.4,0.35
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 10
removetime = 25
sprpriority = 4
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 461
angle = -atan(vel y/vel x)*180/PI 

[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 21636
id = 21636
pos = 0,0
scale = 0.6,0.3
postype = p1
facing = 1
bindtime = -1
removetime = -2
sprpriority = 4
supermovetime = 99999
pausemovetime = 99999
ownpal = 0

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 21636
angle = -atan(vel y/vel x)*180/PI 

[State 1640, X]
Type=VarSet
trigger1 = time = 0
fvar(13)=(EnemyNear(0),Pos X-Pos X)*Facing

[State 1640, Y]
Type=VarSet
trigger1 = time = 0
fvar(14)=(EnemyNear(0),pos Y-Pos Y-30)

[State 1640, Vector Length]
Type=VarSet
trigger1 = time = 0
fvar(15)=Exp(0.5*ln((fvar(13)*fvar(13))+(fvar(14)*fvar(14))))

[State 0, PosSet]
type = velSet
trigger1 = time > 5 && pos y < 10
x = abs((Fvar(13))/(fvar(15))*20)
y = (FVar(14))/(fvar(15))*20

[State 0, VelSet]
type = VelSet
trigger1 = time > 5 && pos y >= 0
x = 0
y = 0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -atan(vel y/vel x)*180/PI 

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F10+random%3
angle = -25+random%50
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 1,1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = F643
pos = -5-random%20,-15-random%30
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 1
removetime = -2
sprpriority = 3
scale = 0.7,0.7
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,0

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
trigger1 = !time
attr = S, NA
damage = 200,100
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0,0
sparkno = 4
sparkxy = -15, 0
hitsound = 14, 5
guardsound = 14, 5
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -4,3
airguard.velocity = -4,3
air.type = High
air.velocity = -4,3
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall.yvelocity = -6
fall = 1

[State 0, End]
type = destroyself
trigger1 = AnimTime = 0
;-----------------
;Kurama Renzoku
[StateDef 21640]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21640
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S3,51

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S3,51

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = S12,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = S12,4

[State 0, Helper]
type = Helper
trigger1 = time >= 20 && timemod = 4,0
triggerall = power >= 200
helpertype = normal
name = "Renzoku"
stateno = 21645
ID = 21645
pos = 115,-155
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 0.3
size.yscale = 0.3

[State 100, 4]
type = ChangeState
trigger1 = parent, stateno != 20640
value = 21600

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0
;------------------
;Renzoku
[StateDef 21645]
type = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 21645
poweradd = -200
sprpriority = 2

[State 0,AfterImage]
type = AfterImage
trigger1 = (!Time)
time = -1
framegap = 1
length = 2
paladd = 0, 0, 0
palmul = .90, .90, .90
palcontrast = 100, 100, 100
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 1
flag = invisible

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 10
value = (-20+random%100)/10

[State 0, VelSet]
type = VelSet
trigger1 = time <= 25
y = fvar(10);*cos(time*PI/(random%360))

[State 0, VelSet]
type = VelSet
trigger1 = time < 5
x = 6

[State 0, VarSet]
type = VarSet
trigger1 = p2bodydist x != 0 
fv = 11
value = -atan((p2bodydist y - 35 )/p2bodydist x ) + atan(vel y /vel x ) 

[State 0, VelSet]
type = Veladd
triggerall = time > 5
trigger1 = p2bodydist x +20 >= 0
x = 0.5

[State 0, VelSet]
type = Veladd
triggerall = time > 25
triggerall = vel y < 15
trigger1 = (p2bodydist y - 35) >= 0 && fvar(11) != [-0.09,0.09]
trigger2 = (p2bodydist y - 35) < 0 && fvar(11) = [-0.09,0.09]
y = 0.5

[State 0, VelSet]
type = Veladd
triggerall = time > 25
triggerall = vel y > -15
trigger1 = (p2bodydist y - 35) < 0 && fvar(11) != [-0.09,0.09]
trigger2 = (p2bodydist y - 35) >= 0 && fvar(11) = [-0.09,0.09]
y = -0.5

[State 0, AngleDraw]
type = AngleDraw
trigger1 = vel x != 0
value = -atan(vel y/vel x)*180/PI 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = vel x = 0
value = cond(vel y < 0,90,-90) 

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 50,50
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 20
sparkno = 4
sparkxy = -15, -41
hitsound = F14, 6
guardsound = F14, 6
ground.type = High
ground.slidetime = 5
ground.hittime  = 20
ground.velocity = 0,0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 20
p1stateno = 21646

[State 0, ChangeState]
type = ChangeState
trigger1 = time > 60 && random = [0,10]
trigger2 = vel x < 0
trigger3 = time > 5 && pos y >= 10
value = 21646
ctrl = 0
;------------------
;Renzoku Wybuch
[StateDef 21646]
type = A
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 21646
poweradd = 0
sprpriority = 2

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = F1330
ID = 21647
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermove
pausemove
scale = 1,1
sprpriority = 5
ownpal = 1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = F1331
ID = 21647
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermove
pausemove
scale = 0.6,0.6
sprpriority = 2
ownpal = 1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = time = 1
anim = 21647
ID = 21647
pos = 0,0
postype = p1
bindtime = -1
removetime = -2
supermove
pausemove
scale = 0.7,0.7
sprpriority = 3
ownpal = 1
ontop = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F15,5

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = !time
attr = S, NA
damage = 100,50
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 0, 5
sparkno = 4
sparkxy = 0, 0
hitsound = F14, 6
guardsound = F14, 6
ground.type = High
ground.slidetime = 5
ground.hittime  = 10
ground.velocity = -4,-4
airguard.velocity = -4,-4
air.type = High
air.velocity = -4,-4
air.hittime = 10
fall = 1
envshake.time = 40
envshake.ampl = 4
envshake.freq = 40
palfx.time = 30
palfx.add = 150,0,-100
palfx.mul = 256,256,256
palfx.sinadd = 110,55,85,10

[State 0, End]
type = destroyself
trigger1 = Time = 20
;-----------------
;Kurama Bijudama
[StateDef 21650]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21650
poweradd = -1000
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F14,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = S3,49

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = S3,49

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "Bijudama"
stateno = 20410
ID = 20411
pos = 120,-200
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
size.xscale = 1.4
size.yscale = 1.4

[State 100, 4]
type = ChangeState
trigger1 = parent, stateno != 20650
value = 21600

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0
;-----------------
;Kurama Run Attack
[StateDef 21660]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21660
poweradd = 0
sprpriority = 4

[State -2, ParentVarAdd]
type = ParentVarAdd
trigger1 = 1
v = 19
value = gethitvar(damage)

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
ignorehitpause = 1
value = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, HitOverride]
type = HitOverride
trigger1 = time >= 0
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 21615
time = 2

[State 0, Turn]
type = Turn
trigger1 = parent, facing = -1 && facing = 1

[State 0, Turn]
type = Turn
trigger1 = parent, facing = 1 && facing = -1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F16,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F16,1

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 2
time = 30
freq = 30
ampl = -6
phase = 5

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = 40*0.7,2
postype = p1
scale = 2,1.8
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F65
ID = 24
pos = 40*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = -75*0.7,2
postype = p1
scale = 2,1.8
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F65
ID = 24
pos = -75*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F290
ID = 23
pos = -325*0.7,2
postype = p1
scale = 2,1.8
sprpriority = -1
ontop = 0

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = F65
ID = 24
pos = -325*0.7,2
postype = p1
scale = 1,0.7
sprpriority = -2
ontop = 0


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = S10,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = S10,0+random%4

[State 0, Explod]
type = Explod
trigger1 = movehit = 1 && p2movetype = H
anim = 2021
pos = 0,-40*0.85
postype = p2  ;p2,front,back,left,right
facing = 1
bindtime = 5
removetime = -2
sprpriority = 4
scale = 0.7,0.7
ownpal = 1
ontop = 0
supermovetime = 9999
pausemovetime = 9999

[State 0, HitDef]
type = HitDef
fall.yvelocity = -6
trigger1 = animelem = 2
attr = S, NA
damage = 200,100
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3
pausetime = 0, 0
sparkno = 2016
sparkxy = -15, -50*0.85
hitsound = S9, 5
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -12,5
airguard.velocity = -12,5
air.type = High
air.velocity = -12,5
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 100, 4]
type = ChangeState
trigger1 = parent, stateno != 20660
value = 21600

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 20695
trigger2 = parent, stateno != [20600,20699]
value = 21695
ctrl = 0
;-----------------
;Kurama Start
[StateDef 21690]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21690
poweradd = 0
sprpriority = 4

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = [20600,20699]
time = 2
facing = 0
pos = 0,0

[State -3, KCM]
type = AfterImage
trigger1 = 1
time = 1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = time*10,256

[State 0, Turn]
type = Turn
trigger1 = parent, facing = -1 && facing = 1

[State 0, Turn]
type = Turn
trigger1 = parent, facing = 1 && facing = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "White Flash"
ID = 9999
stateno = 9999
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 10
size.yscale = 10
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,9

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 21600
ctrl = 0
;-----------------
;Kurama End
[StateDef 21695]
type = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21695
poweradd = 0
sprpriority = 4

[State -3, KCM]
type = AfterImage
trigger1 = 1
time = 1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150-time*10,256

[State 0, Turn]
type = Turn
trigger1 = parent, facing = -1 && facing = 1

[State 0, Turn]
type = Turn
trigger1 = parent, facing = 1 && facing = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = target, ishelper = 0
flag = unguardable

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "White Flash"
ID = 9999
stateno = 9999
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 10
size.yscale = 10
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S9,9

[State 0, ChangeState]
type = Destroyself
trigger1 = animtime = 0
;-----------------
;Kage Bunshin
[StateDef 20750]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20750
poweradd = 0
sprpriority = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S2,2
volume = 255
channel = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 25
value = S3,5+random%1
volume = 255
channel = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F17,0

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = 90002
ID = 75502
pos = -33,-75
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 90
scale = 0.5,0.5
sprpriority = 2
removeongethit = 1
ownpal = 1
ontop = 0

[State 7500, Explod]
type = Explod
ownpal = 1
trigger1 = time > 5 && time <= 100
anim = 90000
ID = 75501
pos = -33,-75
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 1
scale = fvar(10), 0.5
sprpriority = 1
removeongethit = 1
ownpal = 1

[State 7500, VarSet]
type = VarSet
trigger1 = time = 1
fv = 10    ;fv = 10
value = 0

[State 7500, VarAdd]
type = VarAdd
trigger1 = time%2
fv = 10
value = 0.02

[State 7500, VarSet]
type = VarSet
trigger1 = fvar(10) > 1
fv = 10    ;fv = 10
value = 1

[State 0, Helper]
type = Helper
trigger1 = time = 25
triggerall = numhelper(30000) = 0
helpertype = player
name = "bunshin"
ID = 30000
stateno = 32221
pos = -75+random%150,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.85
supermovetime = 0
pausemovetime = 0

[State 0, Helper]
type = Helper
trigger1 = time = 50
triggerall = numhelper(30000) <= 1
helpertype = player
name = "bunshin"
ID = 30000
stateno = 32221
pos = -75+random%150,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85
size.yscale = 0.85
supermovetime = 0
pausemovetime = 0

[State 0, End]
type = ChangeState
trigger1 = var(50) = 0 && command != "hold_z"
trigger2 = power < 1000
trigger3 = var(50) = 1 && random = [0,100-var(49)*(var(49))/100]
trigger4 = win
trigger5 = lose
trigger6 = drawgame
trigger7 = life = 0
trigger8 = !ALive
trigger9 = time = 50
trigger10 = numhelper(30000) = 2
value = 0
ctrl = 1
;-----------------
;Wakusei Rasengan
[StateDef 20970]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20970
poweradd = -500
sprpriority = 2

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time < 100
value = -10

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time < 80
time = 1
add = -time*1.5,-time*1.5,-time*1.5

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time < 80
time = 1
add = -time,-time,-time

[State 0, BGPalFX]
type = BGPalFX
triggerall = StageVar(info.name) != "Y" && StageVar(info.name) != "H"
trigger1 = time >= 80
time = 10
add = -120,-120,-120

[State 0, BGPalFX]
type = BGPalFX
trigger1 = StageVar(info.name) = "Y" 
trigger2 = StageVar(info.name) = "H"
triggerall = time >= 80
time = 10
add = -80,-80,-80

[State 0, Wiatr]
type = Explod
ownpal = 1
trigger1 = timemod = 35,0
anim = F601
id = 600
pos = -21*0.85,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = -1
scale = 1.2,0.75
ownpal = 1
supermovetime = 9999

[State 0, Wiatr]
type = Explod
ownpal = 1
trigger1 = timemod = 35,0
anim = F601
id = 600
pos = -21*0.85,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = -1
scale = 1.2,0.75
ownpal = 1
supermovetime = 9999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 930

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 931

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = 1
id = 932



[State 0, VarSet]
type = VarSet
trigger1 = 0;time > 10 && time < 90
v = 6
value = 43+(time-5)*3.0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S3,36

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S3,36

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S3,36

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 5
time = 135
movetime = 135
anim = -1
darken = 0
unhittable = 0

[State 0, end]
type = ChangeState
trigger1 = animtime = 0
value = 20971
ctrl = 1
;------------------
;Wakusei Rasengan Hit
[StateDef 20971]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20971
poweradd = 0
sprpriority = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State -3, Afterimage Brak]
type = AfterImage
trigger1 = animelem = 2
time = 1

[State -3, KCM]
type = AfterImage
trigger1 =  animelem = 3
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = add

[State 0, 2]
type = Explod
trigger1 = animelem = 2 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 4 && pos y < -5
anim = F350
ID = 350
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 2.5,2.5

[State 0, 2]
type = Explod
trigger1 = animelem = 2 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, 2]
type = Explod
trigger1 = animelem = 4 && pos y > -5
anim = F290
ID = 290
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
scale = 1.5,1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
trigger2 = animelem = 4
value = F3,2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S9,1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = p2bodydist x -80

[State 0, Turn]
type = Turn
trigger1 = 0;animelem = 4

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 2
anim = 2021
ID = 2021
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
supermovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, Explod]
type = Explod
ownpal = 1
trigger1 = animelem = 4
anim = 2020
ID = 2020
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 999
supermovetime = 999
scale = 0.3,0.3
sprpriority = 3
ontop = 0
ownpal = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = [9,19]
x = 5-(time-9)/3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S1,0+random%7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S1,0+random%7

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = time > 13 && time <= 40 && timemod = 3,0
trigger1 = hitcount < 8
attr = S, NT
damage = 125,125
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = cond(var(0) < 2, 3, 1)
pausetime = 0, 20
sparkno = 63466
sparkxy = -15, -41*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -15,-2
airguard.velocity = -15,-2
air.type = High
air.velocity = -15,-2
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = time > 12 && time <= 17
trigger1 = hitcount < 8 && time < 45
time = 1
pos = 48*0.85,-5*0.85
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = time > 17 && time <= 22
trigger1 = hitcount < 8 && time < 45
time = 1
pos = 70*0.85,-5*0.85
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = time > 22
trigger1 = hitcount < 8 && time < 45
time = 1
pos = 100*0.85,-5*0.85
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = hitcount = 8 || time = 45
persistent = 0
helpertype = normal ;player
name = "White Flash"
ID = 9999
stateno = 9999
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 10
size.yscale = 10
supermovetime = 9999
pausemovetime = 9999
persistent = 0

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = hitcount = 8 || time = 45
persistent = 0
hitonce = 1
attr = S, NT
damage = 500,500
animtype = Light
guardflag = MA
hitflag = MAF
priority = cond(var(0) < 2, 3, 1)
pausetime = 0, 0
sparkno = 2001
sparkxy = -15, -41*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -25,-4
airguard.velocity = -25,-4
air.type = High
air.velocity = -25,-4
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
p2stateno = 105027

[State 0, Helper]
type = Helper
trigger1 = time = 14
helpertype = normal;player
name = "Reka"
ID = 200
stateno = 20972
pos = 15*0.85,-37*0.85
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85*0.5
size.yscale = 0.85*0.5
supermovetime = 9999
pausemovetime = 9999

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = time > 40 && !movehit
;trigger3 = hitcount = 9
value = 935
ctrl = 1
;-----------------
;Reka
[StateDef 20972]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 21008
poweradd = 0
sprpriority = 3

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20971
time = 1
pos = 15*0.85,-37*0.85

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = F14,5

[State 0, End]
type = ChangeState
trigger1 = parent, stateno != 20971
value = 20199
ctrl = 1
;----------------------------
;Rasenrangan Charge
[StateDef 20980]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20980
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 8
value = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,2
volume = 255
channel = 3

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 6
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time > 5 && time < 25
v = 6
value = 10+(time-5)*1.5

[State 0, VarSet]
type = VarSet
trigger1 = time = 25
v = 6
value = 40

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time > 5 && time < 25
value = -50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F32,5

[State 0, Wiatr]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F601
id = 600
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = -1
removeongethit = 1
scale = 0.9,0.75
ownpal = 1

[State 0, Wiatr]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F601
id = 600
pos = 0,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = -1
removeongethit = 1
scale = 0.9,0.75
ownpal = 1

[State 0, Aura]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F1130
id = 1130
pos = -20,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 7
removeongethit = 1
scale = 1,1
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal;player
name = "Rasengan"
ID = 20984
stateno = 20985
pos = -30*0.85,-20*0.85
size.xscale = 1
size.yscale = 1
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal;player
name = "Rasengan"
ID = 20985
stateno = 20985
pos = -25*0.85,-45*0.85
size.xscale = 1
size.yscale = 1
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal;player
name = "Rasengan"
ID = 20986
stateno = 20985
pos = -12*0.85,-70*0.85
size.xscale = 1
size.yscale = 1
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal;player
name = "Rasengan"
ID = 20987
stateno = 20985
pos = 12*0.85,-70*0.85
size.xscale = 1
size.yscale = 1
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal;player
name = "Rasengan"
ID = 20988
stateno = 20985
pos = 20*0.85,-45*0.85
size.xscale = 1
size.yscale = 1
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal;player
name = "Rasengan"
ID = 20989
stateno = 20985
pos = 25*0.85,-20*0.85
size.xscale = 1
size.yscale = 1
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
value = 20981
ctrl = 1
;-----------------
;Rasenrangan Hit
[StateDef 20981]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20981
poweradd = -1000
sprpriority = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = time < 10
v = 6
value = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 10
v = 6
value = 60

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S3,33

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S3,33

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal;player
name = "Reka"
ID = 20982
stateno = 20982
pos = 3,-15*0.85
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85*0.6
size.yscale = 0.85*0.6
supermovetime = 9999
pausemovetime = 9999

[State 0, End]
type = ChangeState
trigger1 = time > 10 && numhelper(20982) = 0
value = 11
ctrl = 1
;-----------------
;Reka
[StateDef 20982]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20982
poweradd = 0
sprpriority = 0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time <= 5
time = 1
pos = 3,-30*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5
time = 1
pos = 0,-20*0.85

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F14,5

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
trigger2 = parent, stateno != 20981
value = 20199
ctrl = 1
;------------------
;Kula Rasenrangan
[StateDef 20985]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 950
poweradd = 0
sprpriority = 2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 950 && parent, stateno = 20981
value = 20983

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 6
value = parent, var(6)

[State 0, EnvShake]
type = EnvShake
trigger1 = timemod = 5,0
triggerall = ishelper(20984) || ishelper(20989)
time = 1+var(6)/20
freq = 30+var(6)/10
ampl = -3-var(6)/20
phase = 30+var(6)/10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
triggerall = ishelper(20984) || ishelper(20989)
value = F32,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 25,0
triggerall = ishelper(20984) || ishelper(20989)
value = F32,1

[State 0, Kula]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F632;1
id = 90000
pos = 0,0
scale = 0.1,0.1
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = -1
removeongethit = 1
trans = add
supermovetime = 9999
pausemovetime = 9999

[State 0, Kula]
type = ModifyExplod
trigger1 = 1
ID = 90000
scale = 0.1+var(6)*0.0035,0.1+var(6)*0.0035
trans = add

[State 0, Smugi]
type = Explod
ownpal = 1
trigger1 = numexplod(90001) = 0
anim = F678
id = 90001
pos = 0,0
scale = 0.15,0.15
postype = p1
facing = 1
bindtime = -2
removetime = -1
sprpriority = -1
removeongethit = 1
trans = add
angle = -time*3
supermovetime = 9999
pausemovetime = 9999

[State 0, Smugi]
type = ModifyExplod
trigger1 = 1
ID = 90001
scale = 0.15+var(6)*0.005,0.15+var(6)*0.005
trans = add
angle = -time*3

[State 0, Smugi powstawanie]
type = Explod
ownpal = 1
trigger1 = numexplod(90002) = 0 && time < 30
anim = F620
id = 90002
pos = 0,0
scale = 0.5,0.5
postype = p1
facing = 1
bindtime = -2
removetime = -2
sprpriority = -2
removeongethit = 1
trans = add
angle = time*5
supermovetime = 9999
pausemovetime = 9999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 90002
scale = 0.5+var(6)*0.02,0.5+var(6)*0.02
trans = add
angle = time*5

[State 0, Kola]
type = Explod
ownpal = 1
trigger1 = 0;time = 1
anim = F1070
ID = 90003
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 999
scale = 1.2,1.2
sprpriority = -3
ownpal = 1
removeongethit = 1

[State 0, Explod Kolo]
type = Explod
ownpal = 1
trigger1 = numexplod(90004) = 0
anim = F685
id = 90004
pos = 0,0
scale = 0.04+var(6)*0.003,0.04+var(6)*0.003
postype = p1
facing = 1
bindtime = -2
removetime = -2
sprpriority = -1
removeongethit = 1
trans = addalpha
alpha = 150,256
angle = -time*3
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod Kolo]
type = ModifyExplod
trigger1 = 1
ID = 90004
scale = 0.04+var(6)*0.003,0.04+var(6)*0.003
trans = addalpha
alpha = 150,256
angle = -time*3

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = parent, stateno = 20981
hitonce = 1
attr = S, NA
damage = 0,0
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 2
pausetime = 0, 5
sparkno = 63466
sparkxy = -15, 0
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,-3
airguard.velocity = -3,-3
air.type = High
air.velocity = -3,-3
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10

;Rasenrengan

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20984)
time = 1
pos = -30*0.85,-20*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20985)
time = 1
pos = -25*0.85,-45*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20986)
time = 1
pos = -12*0.85,-70*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20987)
time = 1
pos = 12*0.85,-70*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20988)
time = 1
pos = 20*0.85,-45*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20989)
time = 1
pos = 25*0.85,-20*0.85

;------

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20984)
time = 1
pos = -60*0.85,-23*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20985)
time = 1
pos = -62*0.85,-53*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20986)
time = 1
pos = -2*0.85,-77*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20987)
time = 1
pos = 17*0.85,-77*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20988)
time = 1
pos = 58*0.85,-49*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20989)
time = 1
pos = 58*0.85,-20*0.85

;------

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20984)
time = 1
pos = -110*0.85,-20*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20985)
time = 1
pos = -95*0.85,-79*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20986)
time = 1
pos = -15*0.85,-125*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35 
triggerall = ishelper(20987)
time = 1
pos = 22*0.85,-125*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20988)
time = 1
pos = 92*0.85,-73*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20989)
time = 1
pos = 100*0.85,-20*0.85

;-------------------------

[State 0, End]
type = Changestate
trigger1 = anim = 20983 && movehit && parent, stateno = 20981 && parent, time >= 15
value = 20986

[State 0, End]
type = Changestate
trigger1 = parent, stateno != [20980,20981]
trigger2 = parent, stateno = 20981 && parent, time >= 35
value = 20987
;------------------
;Kula Rasenrangan
[StateDef 20986]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20984
poweradd = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 4
value = time

[State 0, EnvShake]
type = EnvShake
trigger1 = timemod = 5,0
time = 1+var(6)/20
freq = 30+var(6)/10
ampl = -3-var(6)/20
phase = 30+var(6)/10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F32,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 25,0
value = F32,1

[State 0, Kola]
type = ModifyExplod
trigger1 = 1
ID = 90000
scale = 0.1+var(6)*0.0035,0.1+var(6)*0.0035
trans = add

[State 0, Smugi]
type = ModifyExplod
trigger1 = 1
ID = 90001
scale = 0.15+var(6)*0.005,0.15+var(6)*0.005
trans = add
angle = -time*3

[State 0, Explod Kolo]
type = ModifyExplod
trigger1 = 1
ID = 90004
scale = 0.04+var(6)*0.003,0.04+var(6)*0.003
trans = addalpha
alpha = 150,256
angle = -time*3

;---------

[State 0, Fale]
type = Explod
ownpal = 1
triggerall = timemod = 10,0
trigger1 = ishelper(20984)
trigger2 = ishelper(20989)
anim = F644
id = 90006
pos = 5,0
scale = 0.2+var(6)*0.008,(0.2+var(6)*0.008)*0.7
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = 3
vel = -0.8,-0.2
removeongethit = 1
trans = add
supermovetime = 9999
pausemovetime = 9999

[State 0, Wiatr]
type = Explod
ownpal = 1
triggerall = time = 5
trigger1 = ishelper(20984)
trigger2 = ishelper(20989)
anim = F461
id = 90008
pos = -30,0
scale = 0.3+var(6)*0.002,0.3+var(6)*0.002
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
removeongethit = 1
vel = -1.5,-0.3
trans = add
supermovetime = 9999
pausemovetime = 9999

;---------

[State 0, Fale]
type = Explod
ownpal = 1
triggerall = timemod = 10,0
trigger1 = ishelper(20985)
trigger2 = ishelper(20988)
anim = F644
id = 90006
pos = 3,0
scale = 0.2+var(6)*0.008,(0.2+var(6)*0.008)*0.7
angle = 40
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = 3
vel = -0.5,0.5
removeongethit = 1
trans = add
supermovetime = 9999
pausemovetime = 9999

[State 0, Wiatr]
type = Explod
ownpal = 1
triggerall = time = 5
trigger1 = ishelper(20985)
trigger2 = ishelper(20988)
anim = F461
id = 90008
pos = -20,10
scale = 0.3+var(6)*0.002,0.3+var(6)*0.002
angle = 40
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
removeongethit = 1
vel = -1,1
trans = add
supermovetime = 9999
pausemovetime = 9999

;---------

[State 0, Fale]
type = Explod
ownpal = 1
triggerall = timemod = 10,0
trigger1 = ishelper(20986)
trigger2 = ishelper(20987)
anim = F644
id = 90006
pos = 0,-5
scale = 0.2+var(6)*0.008,(0.2+var(6)*0.008)*0.7
angle = 85
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = 3
vel = -0.14,1
removeongethit = 1
trans = add
supermovetime = 9999
pausemovetime = 9999

[State 0, Wiatr]
type = Explod
ownpal = 1
triggerall = time = 5
trigger1 = ishelper(20986)
trigger2 = ishelper(20987)
anim = F461
id = 90008
pos = 5,20
scale = 0.3+var(6)*0.002,0.3+var(6)*0.002
angle = 85
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
removeongethit = 1
vel = -0.2,1.5
trans = add
supermovetime = 9999
pausemovetime = 9999

;----------

[State 0, Fala Uderzeniowa]
type = Explod
ownpal = 1
triggerall = time = 15
trigger1 = ishelper(20984)
trigger2 = ishelper(20989)
anim = F645
id = 90009
pos = -15,-pos y
scale = 1.8,1.8
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
vel = var(6)*0.01,0
removeongethit = 1
trans = add
supermovetime = 9999
pausemovetime = 9999

[State 0, Podmuch]
type = Explod
ownpal = 1
triggerall = time = 5
trigger1 = ishelper(20984)
trigger2 = ishelper(20989)
anim = F674
id = 90010
pos = -10,-pos y+5
scale = 0.2+var(6)*0.005,0.2+var(6)*0.005
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 5
vel = -var(6)*0.01,0
removeongethit = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = timemod = 5,0
trigger1 = hitcount < 4
triggerall = parent, var(8) < 900
v = 8
value = 50

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = timemod = 5,0
trigger1 = hitcount = 4
triggerall = parent, var(8) < 1000
v = 8
value = 100

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 5,0
trigger1 = hitcount < 4
triggerall = ishelper(20984) || ishelper(20989) 
triggerall = parent, var(8) < 900 
attr = S, NA
damage = 100,50
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = cond(var(0) < 2, 3, 1)
pausetime = 0, 20
sparkno = 63466
sparkxy = -15, 0*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -8,-2
airguard.velocity = -8,-2
air.type = High
air.velocity = -8,-2
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, TargetBind]
type = TargetBind
triggerall = target, ishelper = 0
trigger1 = movehit && hitcount < 4
time = 5
pos = 0,-5

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = hitcount = 4 || parent, var(8) >= 900
triggerall = ishelper(20984) || ishelper(20989) 
triggerall = parent, var(8) < 1000
hitonce = 1
attr = C, HP
damage = 300,100
animtype = Light
guardflag = MA
hitflag = MAF
priority = cond(var(0) < 2, 3, 1)
pausetime = 0, 0
sparkno = 2001
sparkxy = -15, 0*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -10,-4
airguard.velocity = -10,-4
air.type = High
air.velocity = -10,-4
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
p2stateno = 109998

;----

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 5,0
trigger1 = hitcount < 4
triggerall = ishelper(20985) || ishelper(20988) 
triggerall = parent, var(8) < 900 
attr = S, NA
damage = 100,50
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = cond(var(0) < 2, 3, 1)
pausetime = 0, 20
sparkno = 63466
sparkxy = -15, 0*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -6,-5
airguard.velocity = -6,-5
air.type = High
air.velocity = -6,-5
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, TargetBind]
type = TargetBind
triggerall = target, ishelper = 0
trigger1 = movehit && hitcount < 4
time = 5
pos = 0,-5

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = hitcount = 4 || parent, var(8) >= 900
triggerall = ishelper(20985) || ishelper(20988) 
triggerall = parent, var(8) < 1000
hitonce = 1
attr = C, HP
damage = 200,100
animtype = Light
guardflag = MA
hitflag = MAF
priority = cond(var(0) < 2, 3, 1)
pausetime = 0, 0
sparkno = 2001
sparkxy = -15, 0*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -9,-6
airguard.velocity = -9,-6
air.type = High
air.velocity = -9,-6
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
p2stateno = 109998

;----

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 5,0
trigger1 = hitcount < 4
triggerall = ishelper(20986) || ishelper(20987)
triggerall = parent, var(8) < 900 
attr = S, NA
damage = 100,50
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = cond(var(0) < 2, 3, 1)
pausetime = 0, 20
sparkno = 63466
sparkxy = -15, 0*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -2,-5
airguard.velocity = -2,-5
air.type = High
air.velocity = -2,-5
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, TargetBind]
type = TargetBind
triggerall = target, ishelper = 0
trigger1 = movehit && hitcount < 4
time = 5
pos = 0,-5

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = hitcount = 4 || parent, var(8) >= 900
triggerall = ishelper(20986) || ishelper(20987) 
triggerall = parent, var(8) < 1000
hitonce = 1
attr = C, HP
damage = 200,100
animtype = Light
guardflag = MA
hitflag = MAF
priority = cond(var(0) < 2, 3, 1)
pausetime = 0, 0
sparkno = 2001
sparkxy = -15, 0*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,-11
airguard.velocity = -3,-11
air.type = High
air.velocity = -3,-11
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
p2stateno = 109998


;Rasenrengan

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20984)
time = 1
pos = -30*0.85,-20*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20985)
time = 1
pos = -25*0.85,-45*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20986)
time = 1
pos = -12*0.85,-70*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20987)
time = 1
pos = 12*0.85,-70*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20988)
time = 1
pos = 20*0.85,-45*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20989)
time = 1
pos = 25*0.85,-20*0.85

;------

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20984)
time = 1
pos = -60*0.85,-23*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20985)
time = 1
pos = -62*0.85,-53*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20986)
time = 1
pos = -2*0.85,-77*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20987)
time = 1
pos = 17*0.85,-77*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20988)
time = 1
pos = 58*0.85,-49*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20989)
time = 1
pos = 58*0.85,-20*0.85

;------

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20984)
time = 1
pos = -110*0.85,-20*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20985)
time = 1
pos = -95*0.85,-79*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20986)
time = 1
pos = -15*0.85,-125*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35 
triggerall = ishelper(20987)
time = 1
pos = 22*0.85,-125*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20988)
time = 1
pos = 92*0.85,-73*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20989)
time = 1
pos = 100*0.85,-20*0.85

;--------------------

[State 0, End]
type = Changestate
trigger1 = parent, stateno != [20980,20981]
trigger2 = parent, stateno = 20981 && parent, time >= 35
value = 20987
;------------------
;Kula Rasenrangan
[StateDef 20987]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 950
poweradd = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 5
value = var(6)

[State 0, VarSet]
type = VarAdd
trigger1 = 1
v = 6
value = -var(5)/10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
triggerall = ishelper(20984) || ishelper(20989)
value = F32,2

[State 0, Kula]
type = ModifyExplod
trigger1 = 1
ID = 90000
scale = 0.1+var(6)*0.0035,0.1+var(6)*0.0035
trans = add

[State 0, Kula]
type = RemoveExplod
trigger1 = time = 10
id = 90000

[State 0, Smugi]
type = ModifyExplod
trigger1 = 1
ID = 90001
scale = 0.15+var(6)*0.005,0.15+var(6)*0.005
trans = add
angle = -time*3

[State 0, Smugi]
type = RemoveExplod
trigger1 = time = 10
id = 90001

[State 0, Explod Kolo]
type = ModifyExplod
trigger1 = 1
ID = 90004
scale = 0.04+var(6)*0.003,0.04+var(6)*0.003
trans = addalpha
alpha = 150,256
angle = -time*3

[State 0, Smugi]
type = RemoveExplod
trigger1 = time = 10
id = 90004

[State 0, Fala]
type = ModifyExplod
trigger1 = 1
ID = 90006
scale = 0.2+var(6)*0.01,(0.2+var(6)*0.01)*0.7
trans = add

[State 0, Fala]
type = RemoveExplod
trigger1 = time = 10
id = 90006

[State 0, Fala]
type = ModifyExplod
trigger1 = 1
ID = 90007
scale = 0.25+var(6)*0.01,0.25+var(6)*0.01
trans = add

[State 0, Fala]
type = RemoveExplod
trigger1 = time = 10
id = 90007

;Rasenrengan

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20984)
time = 1
pos = -30*0.85,-20*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20985)
time = 1
pos = -25*0.85,-45*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20986)
time = 1
pos = -12*0.85,-70*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20987)
time = 1
pos = 12*0.85,-70*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20988)
time = 1
pos = 20*0.85,-45*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20980
trigger2 = parent, time <= 5 
triggerall = ishelper(20989)
time = 1
pos = 25*0.85,-20*0.85

;------

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20984)
time = 1
pos = -60*0.85,-23*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20985)
time = 1
pos = -62*0.85,-53*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20986)
time = 1
pos = -2*0.85,-77*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20987)
time = 1
pos = 17*0.85,-77*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20988)
time = 1
pos = 58*0.85,-49*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 5 && parent, time <= 10 
triggerall = ishelper(20989)
time = 1
pos = 58*0.85,-20*0.85

;------

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20984)
time = 1
pos = -110*0.85,-20*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20985)
time = 1
pos = -95*0.85,-79*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20986)
time = 1
pos = -15*0.85,-125*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35 
triggerall = ishelper(20987)
time = 1
pos = 22*0.85,-125*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20988)
time = 1
pos = 92*0.85,-73*0.85

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20981 && parent, time > 10 && parent, time <= 35
triggerall = ishelper(20989)
time = 1
pos = 100*0.85,-20*0.85

;--------------------

[State 0, End]
type = Destroyself
trigger1 = time = 11
;-----------------
;Rasenkyugan Charge
[StateDef 20990]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20990
poweradd = 0
sprpriority = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = F8,0+random%4
volume = 255
channel = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = F17,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S2,2
volume = 255
channel = 3

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 6
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time > 5 && time < 25
v = 6
value = 10+(time-5)*7

[State 0, VarSet]
type = VarSet
trigger1 = time = 25
v = 6
value = 150

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time > 5 && time < 25
value = -50

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 5
value = -500

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = F32,5

[State 0, Wiatr]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F601
id = 600
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = -1
removeongethit = 1
scale = 0.9,0.75
ownpal = 1

[State 0, Wiatr]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F601
id = 600
pos = 0,0
postype = p1
facing = -1
bindtime = 1
removetime = -2
sprpriority = -1
removeongethit = 1
scale = 0.9,0.75
ownpal = 1

[State 0, Aura]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F1130
id = 1130
pos = 0,0
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 7
removeongethit = 1
scale = 1,1
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 50 && helper(20992), movehit
persistent = 0
value = S3,32

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 50 && helper(20992), movehit
persistent = 0
value = S3,32

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal;player
name = "Reka"
ID = 20992
stateno = 20992
pos = 0,-15*0.85
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.85*0.6
size.yscale = 0.85*0.6
supermovetime = 9999
pausemovetime = 9999

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal;player
name = "Rasengan"
ID = 950
stateno = 20995
pos = -30*0.85,-20*0.85
size.xscale = 1
size.yscale = 1
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
trigger2 = time > 10 && helper(20992), stateno != 20992
value = 0
ctrl = 1
;-----------------
;Reka
[StateDef 20992]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20992
poweradd = 0
sprpriority = 0

[State -3, KCM]
type = AfterImage
trigger1 = time = 0
time = -1
length = 10
palcolor = 256
palinvertall = 0
palbright = 0,0,0
palcontrast = 256,230,200
palpostbright = 0,0,0
paladd = 5,4,3
palmul = .60,.50,.40
timegap = 1
framegap = 1
trans = addalpha
alpha = 150,256

[State 0, SprPriority]
type = SprPriority
trigger1 = 1 
value = 0
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20990
time = 1
pos = -3*0.85,-30*0.85

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = F14,5

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
triggerall = parent, stateno = 20990
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
attr = C, HP
damage = 0,0
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 2
pausetime = 0, 0
sparkno = 63466
sparkxy = -15, 0
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 0,0
airguard.velocity = 0,0
air.type = High
air.velocity = 0,0
air.hittime = 12
p2stateno = 105026

[State 0, TargetBind]
type = TargetBind
trigger1 = p2bodydist x > 0
trigger1 = time = [35,45]
time = 10
pos = 112*0.85,40*0.85
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = p2bodydist x < 0
trigger1 = time = [35,45]
time = 10
pos = -112*0.85,40*0.85
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
time = 10
pos = 0*0.85,-75*0.85
ignorehitpause = 1

[State 0, End]
type = ChangeState
trigger1 = animtime = 0
trigger2 = parent, stateno != 20990
trigger3 = time = 35 && !movehit
value = 20199
ctrl = 1
;------------------
;Kula Rasenkyugan
[StateDef 20995]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 950
poweradd = 0
sprpriority = 2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 950 && parent, stateno = 20990 && parent, time = 50
value = 20993

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 6
value = parent, var(6)

[State 0, EnvShake]
type = EnvShake
trigger1 = timemod = 5,0
time = 1+var(6)/30
freq = 30+var(6)/15
ampl = -3-var(6)/30
phase = 30+var(6)/15

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F32,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 25,0
value = F32,1

[State 0, Kula]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F632;1
id = 90000
pos = 0,0
scale = 0.1,0.1
postype = p1
facing = 1
bindtime = -1
removetime = -1
sprpriority = -1
removeongethit = 1
trans = add
supermovetime = 9999
pausemovetime = 9999

[State 0, Kula]
type = ModifyExplod
trigger1 = 1
ID = 90000
scale = 0.1+var(6)*0.0035,0.1+var(6)*0.0035
trans = add

[State 0, Smugi]
type = Explod
ownpal = 1
trigger1 = numexplod(90001) = 0
anim = F678
id = 90001
pos = 0,0
scale = 0.15,0.15
postype = p1
facing = 1
bindtime = -2
removetime = -1
sprpriority = -1
removeongethit = 1
trans = add
angle = -time*3
supermovetime = 9999
pausemovetime = 9999

[State 0, Smugi]
type = ModifyExplod
trigger1 = 1
ID = 90001
scale = 0.15+var(6)*0.005,0.15+var(6)*0.005
trans = add
angle = -time*3

[State 0, Smugi powstawanie]
type = Explod
ownpal = 1
trigger1 = numexplod(90002) = 0 && time < 30
anim = F620
id = 90002
pos = 0,0
scale = 0.5,0.5
postype = p1
facing = 1
bindtime = -2
removetime = -2
sprpriority = -2
removeongethit = 1
trans = add
angle = time*5
supermovetime = 9999
pausemovetime = 9999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 90002
scale = 0.5+var(6)*0.01,0.5+var(6)*0.01
trans = add
angle = time*5

[State 0, Kola]
type = Explod
ownpal = 1
trigger1 = 0;time = 1
anim = F1070
ID = 90003
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 999
scale = 1.2,1.2
sprpriority = -3
ownpal = 1
removeongethit = 1

[State 0, Explod Kolo]
type = Explod
ownpal = 1
trigger1 = numexplod(90004) = 0
anim = F685
id = 90004
pos = 0,0
scale = 0.04+var(6)*0.003,0.04+var(6)*0.003
postype = p1
facing = 1
bindtime = -2
removetime = -2
sprpriority = -1
removeongethit = 1
trans = addalpha
alpha = 150,256
angle = -time*3
supermovetime = 9999
pausemovetime = 9999

[State 0, Explod Kolo]
type = ModifyExplod
trigger1 = 1
ID = 90004
scale = 0.04+var(6)*0.003,0.04+var(6)*0.003
trans = addalpha
alpha = 150,256
angle = -time*3

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = parent, stateno = 20990
hitonce = 1
attr = S, NA
damage = 0,0
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 2
pausetime = 0, 5
sparkno = 63466
sparkxy = -15, 0
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = -3,-3
airguard.velocity = -3,-3
air.type = High
air.velocity = -3,-3
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10

;Rasenkyugan

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20990
time = 1
pos = -3*0.85,-98*0.85

;-----------

[State 0, End]
type = Changestate
trigger1 = anim = 20993 && movehit && parent, stateno = 20990 && parent, time >= 51
value = 20996

[State 0, End]
type = Changestate
trigger1 = parent, stateno != 20990
trigger2 = parent, stateno = 20981 && parent, time >= 81
value = 20997
;------------------
;Kula Rasenkyugan
[StateDef 20996]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 20993
poweradd = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 4
value = time

[State 0, EnvShake]
type = EnvShake
trigger1 = timemod = 5,0
time = 1+var(6)/30
freq = 30+var(6)/15
ampl = -3-var(6)/30
phase = 30+var(6)/15

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F32,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F32,3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 25,0
value = F32,1

[State 0, Kola]
type = ModifyExplod
trigger1 = 1
ID = 90000
scale = 0.1+var(6)*0.0035,0.1+var(6)*0.0035
trans = add

[State 0, Smugi]
type = ModifyExplod
trigger1 = 1
ID = 90001
scale = 0.15+var(6)*0.005,0.15+var(6)*0.005
trans = add
angle = -time*3

[State 0, Explod Kolo]
type = ModifyExplod
trigger1 = 1
ID = 90004
scale = 0.04+var(6)*0.003,0.04+var(6)*0.003
trans = addalpha
alpha = 150,256
angle = -time*3

;---------

[State 0, Fale]
type = Explod
ownpal = 1
trigger1 = timemod = 10,0
anim = F644
id = 90006
pos = 0,-10
scale = 0.2+var(6)*0.008,(0.2+var(6)*0.008)*0.7
angle = 90
postype = p1
facing = 1
bindtime = 10
removetime = -2
sprpriority = 3
vel = 0,0.1
removeongethit = 1
trans = add
supermovetime = 9999
pausemovetime = 9999

[State 0, Wiatr]
type = Explod
ownpal = 1
trigger1 = time = 5
anim = F461
id = 90008
pos = 0,-30
scale = 0.3+var(6)*0.002,0.3+var(6)*0.002
angle = 90
postype = p1
facing = 1
bindtime = 1
removetime = -2
sprpriority = 4
removeongethit = 1
vel = 0,1
trans = add
supermovetime = 9999
pausemovetime = 9999

[State 0, Blysk Kuli]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F681
id = 90011
pos = 0,0
scale = 0.01+var(4)*0.03,0.01+var(4)*0.03
postype = p1
facing = 1
bindtime = -2
removetime = -2
sprpriority = 5
removeongethit = 1
trans = add
supermovetime = 9999
pausemovetime = 9999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 90011
scale = 0.01+var(4)*0.03,0.01+var(4)*0.03
trans = add

[State 0, Wybuch Kuli]
type = Explod
ownpal = 1
trigger1 = time = 0
anim = F650
id = 90012
pos = 0,0
scale = (0.01+var(4)*0.03)*2,(0.01+var(4)*0.03)*2
angle = 90
postype = p1
facing = 1
bindtime = -2
removetime = -2
sprpriority = 4
removeongethit = 1
trans = add
supermovetime = 9999
pausemovetime = 9999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 90012
scale = (0.01+var(4)*0.03)*2,(0.01+var(4)*0.03)*2
trans = add

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = timemod = 2,0
trigger1 = hitcount < 10
attr = S, NA
damage = 50,25
getpower = 0
animtype = Light
guardflag = MA
hitflag = MAF
priority = cond(var(0) < 2, 3, 1)
pausetime = 0, 20
sparkno = 63466
sparkxy = -15, 0*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 0,-4
airguard.velocity = 0,-4
air.type = High
air.velocity = 0,-4
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
fall = 1

[State 0, TargetBind]
type = TargetBind
triggerall = target, ishelper = 0
trigger1 = movehit && hitcount < 10
ignorehitpause = 1
time = 5
pos = 0,10

[State 0, HitDef]
type = HitDef
givepower = 0
getpower = 0
fall.yvelocity = -6
trigger1 = hitcount = 10
hitonce = 1
attr = C, HP
damage = 400,150
animtype = Light
guardflag = MA
hitflag = MAF
priority = cond(var(0) < 2, 3, 1)
pausetime = 0, 0
sparkno = 2001
sparkxy = -15, 0*0.85
hitsound = 32, 3536
guardsound = 6, 0
ground.type = High
ground.slidetime = 5
ground.hittime  = 12
ground.velocity = 0,-6
airguard.velocity = 0,-6
air.type = High
air.velocity = 0,-6
air.hittime = 12
envshake.time = 30
envshake.freq = 30
envshake.ampl = -7
envshake.phase = 10
p2stateno = 109998

;Rasenkyugan

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20990
time = 1
pos = -3*0.85,-98*0.85

;-----------

[State 0, End]
type = Changestate
trigger1 = parent, stateno != 20990
trigger2 = parent, stateno = 20981 && parent, time >= 81
value = 20997
;------------------
;Kula Rasenkyugan
[StateDef 20997]
type = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 950
poweradd = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 5
value = var(6)

[State 0, VarSet]
type = VarAdd
trigger1 = 1
v = 6
value = -var(5)/10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = F32,2

[State 0, Kula]
type = ModifyExplod
trigger1 = 1
ID = 90000
scale = 0.1+var(6)*0.0035,0.1+var(6)*0.0035
trans = add

[State 0, Kula]
type = RemoveExplod
trigger1 = time = 10
id = 90000

[State 0, Smugi]
type = ModifyExplod
trigger1 = 1
ID = 90001
scale = 0.15+var(6)*0.005,0.15+var(6)*0.005
trans = add
angle = -time*3

[State 0, Smugi]
type = RemoveExplod
trigger1 = time = 10
id = 90001

[State 0, Explod Kolo]
type = ModifyExplod
trigger1 = 1
ID = 90004
scale = 0.04+var(6)*0.003,0.04+var(6)*0.003
trans = addalpha
alpha = 150,256
angle = -time*3

[State 0, Smugi]
type = RemoveExplod
trigger1 = time = 10
id = 90004

[State 0, Fala]
type = ModifyExplod
trigger1 = 1
ID = 90006
scale = 0.2+var(6)*0.01,(0.2+var(6)*0.01)*0.7
trans = add

[State 0, Fala]
type = RemoveExplod
trigger1 = time = 10
id = 90006

[State 0, Fala]
type = ModifyExplod
trigger1 = 1
ID = 90007
scale = 0.25+var(6)*0.01,0.25+var(6)*0.01
trans = add

[State 0, Fala]
type = RemoveExplod
trigger1 = time = 10
id = 90007

;Rasenkyugan

[State 0, BindToParent]
type = BindToParent
trigger1 = parent, stateno = 20990
time = 1
pos = -3*0.85,-98*0.85

;-----------

[State 0, End]
type = Destroyself
trigger1 = time = 11